!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=65)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){var r=n(42),o=n(43);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(44);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){t.exports=function(t,e,n,r,o){var a={};return Object.keys(r).forEach(function(t){a[t]=r[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}},function(t,e,n){t.exports=n(62)},function(t,e,n){t.exports=function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",o="day",a="week",i="month",s="quarter",u="year",c=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,l=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},h={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+d(r,2,"0")+":"+d(o,2,"0")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,i),o=e-r<0,a=t.clone().add(n+(o?-1:1),i);return Number(-(n+(e-r)/(o?r-a:a-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(c){return{M:i,y:u,w:a,d:o,h:r,m:n,s:e,ms:t,Q:s}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p="en",y={};y[p]=f;var v=function(t){return t instanceof b},m=function(t,e,n){var r;if(!t)return null;if("string"==typeof t)y[t]&&(r=t),e&&(y[t]=e,r=t);else{var o=t.name;y[o]=t,r=o}return n||(p=r),r},g=function(t,e,n){if(v(t))return t.clone();var r=e?"string"==typeof e?{format:e,pl:n}:e:{};return r.date=t,new b(r)},w=h;w.l=m,w.i=v,w.w=function(t,e){return g(t,{locale:e.$L,utc:e.$u})};var b=function(){function d(t){this.$L=this.$L||m(t.locale,null,!0)||p,this.parse(t)}var h=d.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(c);if(r)return n?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(e)}(t),this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return w},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(t,e){var n=g(t);return this.startOf(e)<=n&&n<=this.endOf(e)},h.isAfter=function(t,e){return g(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<g(t)},h.$g=function(t,e,n){return w.u(t)?this[e]:this.set(n,t)},h.year=function(t){return this.$g(t,"$y",u)},h.month=function(t){return this.$g(t,"$M",i)},h.day=function(t){return this.$g(t,"$W",o)},h.date=function(t){return this.$g(t,"$D","date")},h.hour=function(t){return this.$g(t,"$H",r)},h.minute=function(t){return this.$g(t,"$m",n)},h.second=function(t){return this.$g(t,"$s",e)},h.millisecond=function(e){return this.$g(e,"$ms",t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,s){var c=this,l=!!w.u(s)||s,d=w.p(t),h=function(t,e){var n=w.w(c.$u?Date.UTC(c.$y,e,t):new Date(c.$y,e,t),c);return l?n:n.endOf(o)},f=function(t,e){return w.w(c.toDate()[t].apply(c.toDate(),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),c)},p=this.$W,y=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(d){case u:return l?h(1,0):h(31,11);case i:return l?h(1,y):h(0,y+1);case a:var g=this.$locale().weekStart||0,b=(p<g?p+7:p)-g;return h(l?v-b:v+(6-b),y);case o:case"date":return f(m+"Hours",0);case r:return f(m+"Minutes",1);case n:return f(m+"Seconds",2);case e:return f(m+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(a,s){var c,l=w.p(a),d="set"+(this.$u?"UTC":""),h=(c={},c[o]=d+"Date",c.date=d+"Date",c[i]=d+"Month",c[u]=d+"FullYear",c[r]=d+"Hours",c[n]=d+"Minutes",c[e]=d+"Seconds",c[t]=d+"Milliseconds",c)[l],f=l===o?this.$D+(s-this.$W):s;if(l===i||l===u){var p=this.clone().set("date",1);p.$d[h](f),p.init(),this.$d=p.set("date",Math.min(this.$D,p.daysInMonth())).toDate()}else h&&this.$d[h](f);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[w.p(t)]()},h.add=function(t,s){var c,l=this;t=Number(t);var d=w.p(s),h=function(e){var n=new Date(l.$d);return n.setDate(n.getDate()+e*t),w.w(n,l)};if(d===i)return this.set(i,this.$M+t);if(d===u)return this.set(u,this.$y+t);if(d===o)return h(1);if(d===a)return h(7);var f=(c={},c[n]=6e4,c[r]=36e5,c[e]=1e3,c)[d]||1,p=this.valueOf()+t*f;return w.w(p,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",r=w.z(this),o=this.$locale(),a=o.weekdays,i=o.months,s=function(t,e,n,r){return t&&t[e]||n[e].substr(0,r)},u=function(t){return w.s(e.$H%12||12,t,"0")},c={YY:String(this.$y).slice(-2),YYYY:String(this.$y),M:String(this.$M+1),MM:w.s(this.$M+1,2,"0"),MMM:s(o.monthsShort,this.$M,i,3),MMMM:i[this.$M],D:String(this.$D),DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:s(o.weekdaysMin,this.$W,a,2),ddd:s(o.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(this.$H),HH:w.s(this.$H,2,"0"),h:u(1),hh:u(2),a:this.$H<12?"am":"pm",A:this.$H<12?"AM":"PM",m:String(this.$m),mm:w.s(this.$m,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:r};return n.replace(l,function(t,e){return e||c[t]||r.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(t,c,l){var d,h=w.p(c),f=g(t),p=6e4*(f.utcOffset()-this.utcOffset()),y=this-f,v=w.m(this,f);return v=(d={},d[u]=v/12,d[i]=v,d[s]=v/3,d[a]=(y-p)/6048e5,d[o]=(y-p)/864e5,d[r]=y/36e5,d[n]=y/6e4,d[e]=y/1e3,d)[h]||y,l?v:w.a(v)},h.daysInMonth=function(){return this.endOf(i).$D},h.$locale=function(){return y[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var n=this.clone();return n.$L=m(t,e,!0),n},h.clone=function(){return w.w(this.toDate(),this)},h.toDate=function(){return new Date(this.$d)},h.toJSON=function(){return this.toISOString()},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},d}();return g.prototype=b.prototype,g.extend=function(t,e){return t(e,b,g),g},g.locale=m,g.isDayjs=v,g.unix=function(t){return g(1e3*t)},g.en=y[p],g.Ls=y,g}()},function(t,e){function n(t,e,n,r,o,a,i){try{var s=t[a](i),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(o,a){var i=t.apply(e,r);function s(t){n(i,o,a,s,u,"next",t)}function u(t){n(i,o,a,s,u,"throw",t)}s(void 0)})}}},function(t,e,n){"use strict";var r=n(14),o=n(24),a=Object.prototype.toString;function i(t){return"[object Array]"===a.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===a.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),i(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:i,isArrayBuffer:function(t){return"[object ArrayBuffer]"===a.call(t)},isBuffer:o,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===a.call(t)},isFile:function(t){return"[object File]"===a.call(t)},isBlob:function(t){return"[object Blob]"===a.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,function(e,o){t[o]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){t.exports=function(){"use strict";return function(t,e,n){var r=e.prototype;n.utc=function(t,n){return new e({date:t,utc:!0,format:n})},r.utc=function(){return n(this.toDate(),{locale:this.$L,utc:!0})},r.local=function(){return n(this.toDate(),{locale:this.$L,utc:!1})};var o=r.parse;r.parse=function(t){t.utc&&(this.$u=!0),o.call(this,t)};var a=r.init;r.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else a.call(this)};var i=r.utcOffset;r.utcOffset=function(){return this.$u?0:i.call(this)};var s=r.format;r.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return s.call(this,e)},r.isUTC=function(){return!!this.$u}}}()},function(t,e,n){"use strict";const r=n(45),o=n(19);t.exports=o(function(t,e,...n){if(e.constructor===t){const e=t.name?" `"+t.name+"`":"";throw new Error("Cannot instantiate abstract class"+e)}for(const t of r(n))if(!(t in e)){const n=e.constructor&&e.constructor.name?"`"+e.constructor.name+"`":"The child class";throw new Error(n+" must define the abstract property `"+t+"`")}})},function(t,e,n){"use strict";(function(e){var r=n(9),o=n(27),a={"Content-Type":"application/x-www-form-urlencoded"};function i(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,u={adapter:("undefined"!=typeof XMLHttpRequest?s=n(15):void 0!==e&&(s=n(15)),s),transformRequest:[function(t,e){return o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(i(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(i(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(t){u.headers[t]={}}),r.forEach(["post","put","patch"],function(t){u.headers[t]=r.merge(a)}),t.exports=u}).call(this,n(26))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(9),o=n(28),a=n(30),i=n(31),s=n(32),u=n(16),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(33);t.exports=function(t){return new Promise(function(e,l){var d=t.data,h=t.headers;r.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest,p="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in f||s(t.url)||(f=new window.XDomainRequest,p="onload",y=!0,f.onprogress=function(){},f.ontimeout=function(){}),t.auth){var v=t.auth.username||"",m=t.auth.password||"";h.Authorization="Basic "+c(v+":"+m)}if(f.open(t.method.toUpperCase(),a(t.url,t.params,t.paramsSerializer),!0),f.timeout=t.timeout,f[p]=function(){if(f&&(4===f.readyState||y)&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?i(f.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?f.response:f.responseText,status:1223===f.status?204:f.status,statusText:1223===f.status?"No Content":f.statusText,headers:n,config:t,request:f};o(e,l,r),f=null}},f.onerror=function(){l(u("Network Error",t,null,f)),f=null},f.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=n(34),w=(t.withCredentials||s(t.url))&&t.xsrfCookieName?g.read(t.xsrfCookieName):void 0;w&&(h[t.xsrfHeaderName]=w)}if("setRequestHeader"in f&&r.forEach(h,function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:f.setRequestHeader(e,t)}),t.withCredentials&&(f.withCredentials=!0),t.responseType)try{f.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&f.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){f&&(f.abort(),l(t),f=null)}),void 0===d&&(d=null),f.send(d)})}},function(t,e,n){"use strict";var r=n(29);t.exports=function(t,e,n,o,a){var i=new Error(t);return r(i,e,n,o,a)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";const r=n(46),o=n(47),a=n(48),i=n(49),s=n(50),u=n(51),c=n(56),{set:l}=n(59),d=n(20);t.exports=u([2,0,1],(t,e,n)=>d(n,function(){const{arg:u=0,path:d=e,ignoreThis:h}=c("arg",t),f=r(Array.from(arguments),u);return i(this)||a(this)||o(h,{blacklist:!0})(this)||(d?(s(f[u])||(f[u]={}),l(f[u],d,this)):f.splice(u,0,this)),n.apply(this,f)}))},function(t,e,n){"use strict";const r=n(53),o=n(54),a=n(55),i=new WeakMap,s=new WeakMap,u=/([^\n]+(?:\r?\n)?{\r?\n)([ \t]*)([\s\S]+)/;t.exports=function(t,e){if("function"!=typeof t)throw new TypeError("wfn argument 1 must be a function");if("function"!=typeof e)throw new TypeError("wfn argument 2 must be a function");const n=s.has(t)?s.get(t):String(t);s.set(e,n);const c=(i.has(t)?i.get(t):[]).concat([e.name]);i.set(e,c),r(t,e);const l=c.filter(Boolean);let d;if(l.length){const t=c.length-l.length;d=o("and",l.map(t=>t+"()").concat(t>0?[t+" other unnamed function"+a(t,"","s")]:[]))}else d=c.length+" unnamed function"+a(c.length,"","s");const h=`/* [wfn] Wrapped with ${d} */`;let f;const p=n.match(u);if(p){const[,t,e,n]=p;f=t+e+h+"\n"+e+n}else f=n.trim()+"\n"+h;return e.toString=(()=>f),e}},function(t,e,n){t.exports=n(23)},function(t,e,n){(function(n){var r,o,a;o=[],void 0===(a="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){i(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,i=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,i){var s=a.URL||a.webkitURL,u=document.createElement("a");n=n||t.name||"download",u.download=n,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?o(u):r(u.href)?e(t,n,i):o(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(u.href)},4e4),setTimeout(function(){o(u)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,a){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),n);else if(r(t))e(t,n,a);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){o(i)})}}:function(t,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var i="application/octet-stream"===t.type,s=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},c.readAsDataURL(t)}else{var l=a.URL||a.webkitURL,d=l.createObjectURL(t);o?o.location=d:location.href=d,o=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});a.saveAs=i.saveAs=i,t.exports=i})?r.apply(e,o):r)||(t.exports=a)}).call(this,n(13))},function(t,e,n){"use strict";var r=n(9),o=n(14),a=n(25),i=n(12);function s(t){var e=new a(t),n=o(a.prototype.request,e);return r.extend(n,a.prototype,e),r.extend(n,e),n}var u=s(i);u.Axios=a,u.create=function(t){return s(r.merge(i,t))},u.Cancel=n(18),u.CancelToken=n(40),u.isCancel=n(17),u.all=function(t){return Promise.all(t)},u.spread=n(41),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(12),o=n(9),a=n(35),i=n(36);function s(t){this.defaults=t,this.interceptors={request:new a,response:new a}}s.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[i,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=s},function(t,e){var n,r,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var u,c=[],l=!1,d=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&f())}function f(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++d<e;)u&&u[d].run();d=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(9);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(16);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t}},function(t,e,n){"use strict";var r=n(9);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var a;if(n)a=n(e);else if(r.isURLSearchParams(e))a=e.toString();else{var i=[];r.forEach(e,function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),i.push(o(e)+"="+o(t))}))}),a=i.join("&")}return a&&(t+=(-1===t.indexOf("?")?"?":"&")+a),t}},function(t,e,n){"use strict";var r=n(9),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,a,i={};return t?(r.forEach(t.split("\n"),function(t){if(a=t.indexOf(":"),e=r.trim(t.substr(0,a)).toLowerCase(),n=r.trim(t.substr(a+1)),e){if(i[e]&&o.indexOf(e)>=0)return;i[e]="set-cookie"===e?(i[e]?i[e]:[]).concat([n]):i[e]?i[e]+", "+n:n}}),i):i}},function(t,e,n){"use strict";var r=n(9);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=r.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,a=String(t),i="",s=0,u=r;a.charAt(0|s)||(u="=",s%1);i+=u.charAt(63&e>>8-s%1*8)){if((n=a.charCodeAt(s+=.75))>255)throw new o;e=e<<8|n}return i}},function(t,e,n){"use strict";var r=n(9);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,o,a,i){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(9);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},function(t,e,n){"use strict";var r=n(9),o=n(37),a=n(17),i=n(12),s=n(38),u=n(39);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||i.adapter)(t).then(function(e){return c(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(c(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(9);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(18);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";const r=(t,{depth:e=1/0}={})=>e>0?t.reduce((t,n)=>t.concat(Array.isArray(n)?r(n,{depth:e-1}):[n]),[]):t;t.exports=n(19)(r)},function(t,e){t.exports=function(t,e,n,r){var o,a;if("boolean"!=typeof arguments[0]&&(r=n,n=e,e=t,t=!1),!Array.isArray(e))throw new TypeError("must be an array");if(e=t?e:e.slice(0),a=n<0?"unshift":"push",o=Math.abs(n),"number"!=typeof n||o%1!=0)throw new TypeError("length must be an integer");for(;e.length<o;)e[a](r);return e}},function(t,e,n){"use strict";t.exports=function(t,{blacklist:e}={}){const n=typeof t;return"function"===n?t:"undefined"===n?e?t=>!t:t=>!!t:Array.isArray(t)?e=>t.includes(e):e=>e===t}},function(t,e,n){"use strict";(function(e){const n=void 0!==e,r="undefined"!=typeof window;t.exports=(t=>n&&t===e||r&&t===window)}).call(this,n(13))},function(t,e,n){"use strict";t.exports=function(t){return null==t}},function(t,e,n){"use strict";t.exports=function(t){return"object"==typeof t&&null!==t}},function(t,e,n){"use strict";const r=n(52),o=n(20);t.exports=function(t,e){if(!Array.isArray(t))throw new TypeError("ofn argument 1 must be an array");if(r(t))throw new Error("ofn argument 1 array cannot have duplicates");if(t.some(t=>!Number.isInteger(t)))throw new TypeError("ofn argument 1 array must contain only numbers");if(t.some(e=>e<0||e>=t.length))throw new RangeError("ofn argument 1 array has a number out of range");if("function"!=typeof e)throw new TypeError("ofn argument 2 must be a function");return o(e,function(){const n=[],r=t.slice(0,arguments.length).sort();for(let t=0;t<arguments.length;t++)n[t<r.length?r[t]:t]=arguments[t];return e.apply(this,n)})}},function(t,e,n){"use strict";t.exports=function(t){return new Set(t).size<t.length}},function(t,e,n){"use strict";t.exports=function(t,e={},{enumOnly:n,overwrite:r=!0}={}){for(const o of(n?Object.keys:Reflect.ownKeys)(t))!r&&Object.prototype.hasOwnProperty.call(e,o)||Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o));return e}},function(t,e){t.exports=function(t,e,n){if(!Array.isArray(e)||!t.toString)throw new TypeError;t=t.toString(),n=void 0===n||!!n;var r=e.length;if(0===r)throw new Error("Cannot create an English list of an empty array");if(1===r)return e[0].toString();if(2===r)return e[0].toString()+" "+t+" "+e[1].toString();var o=e.map(function(t){return t.toString()}),a=o.slice(0,r-1),i=o[r-1];return a.join(", ")+(n?", ":" ")+t+" "+i}},function(t,e,n){"use strict";t.exports=((t,e,n)=>1==+t?e:n)},function(t,e,n){"use strict";const r=n(57);t.exports=((t,e)=>r(e)?e:void 0===e?{}:{[t]:e})},function(t,e,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n(58);function o(t){return!0===r(t)&&"[object Object]"===Object.prototype.toString.call(t)}t.exports=function(t){var e,n;return!1!==o(t)&&("function"==typeof(e=t.constructor)&&(!1!==o(n=e.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},function(t,e,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */t.exports=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)}},function(t,e,n){"use strict";const r=n(60);function o(t){const e=t.split("."),n=[];for(let t=0;t<e.length;t++){let r=e[t];for(;"\\"===r[r.length-1]&&void 0!==e[t+1];)r=r.slice(0,-1)+".",r+=e[++t];n.push(r)}return n}t.exports={get(t,e,n){if(!r(t)||"string"!=typeof e)return void 0===n?t:n;const a=o(e);for(let e=0;e<a.length;e++){if(!Object.prototype.propertyIsEnumerable.call(t,a[e]))return n;if(null==(t=t[a[e]])){if(e!==a.length-1)return n;break}}return t},set(t,e,n){if(!r(t)||"string"!=typeof e)return t;const a=t,i=o(e);for(let e=0;e<i.length;e++){const o=i[e];r(t[o])||(t[o]={}),e===i.length-1&&(t[o]=n),t=t[o]}return a},delete(t,e){if(!r(t)||"string"!=typeof e)return;const n=o(e);for(let e=0;e<n.length;e++){const o=n[e];if(e===n.length-1)return void delete t[o];if(t=t[o],!r(t))return}},has(t,e){if(!r(t)||"string"!=typeof e)return!1;const n=o(e);for(let e=0;e<n.length;e++){if(!r(t))return!1;if(!(n[e]in t))return!1;t=t[n[e]]}return!0}}},function(t,e,n){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},function(t,e,n){"use strict";(function(e){
/**
 * filesize
 *
 * @copyright 2019 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 4.1.2
 */
!function(e){var n=/^(b|B)$/,r={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},o={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function a(t){var e,a,i,s,u,c,l,d,h,f,p,y,v,m,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=[],b=0,x=void 0,k=void 0;if(isNaN(t))throw new TypeError("Invalid number");return a=!0===g.bits,f=!0===g.unix,e=g.base||2,h=void 0!==g.round?g.round:f?1:2,c=void 0!==g.locale?g.locale:"",p=void 0!==g.separator?g.separator:"",y=void 0!==g.spacer?g.spacer:f?"":" ",m=g.symbols||{},v=2===e&&g.standard||"jedec",d=g.output||"string",s=!0===g.fullform,u=g.fullforms instanceof Array?g.fullforms:[],x=void 0!==g.exponent?g.exponent:-1,i=e>2?1e3:1024,(l=(k=Number(t))<0)&&(k=-k),(-1===x||isNaN(x))&&(x=Math.floor(Math.log(k)/Math.log(i)))<0&&(x=0),x>8&&(x=8),"exponent"===d?x:(0===k?(w[0]=0,w[1]=f?"":r[v][a?"bits":"bytes"][x]):(b=k/(2===e?Math.pow(2,10*x):Math.pow(1e3,x)),a&&(b*=8)>=i&&x<8&&(b/=i,x++),w[0]=Number(b.toFixed(x>0?h:0)),w[1]=10===e&&1===x?a?"kb":"kB":r[v][a?"bits":"bytes"][x],f&&(w[1]="jedec"===v?w[1].charAt(0):x>0?w[1].replace(/B$/,""):w[1],n.test(w[1])&&(w[0]=Math.floor(w[0]),w[1]=""))),l&&(w[0]=-w[0]),w[1]=m[w[1]]||w[1],!0===c?w[0]=w[0].toLocaleString():c.length>0?w[0]=w[0].toLocaleString(c):p.length>0&&(w[0]=w[0].toString().replace(".",p)),"array"===d?w:(s&&(w[1]=u[x]?u[x]:o[v][x]+(a?"bit":"byte")+(1===w[0]?"":"s")),"object"===d?{value:w[0],symbol:w[1]}:w.join(y)))}a.partial=function(t){return function(e){return a(e,t)}},t.exports=a}("undefined"!=typeof window&&window)}).call(this,n(13))},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),i=new L(r||[]);return a._invoke=function(t,e,n){var r=l;return function(o,a){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw a;return P()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?f:d,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=f,n.method="throw",n.arg=u.arg)}}}(t,n,i),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",d="suspendedYield",h="executing",f="completed",p={};function y(){}function v(){}function m(){}var g={};g[a]=function(){return this};var w=Object.getPrototypeOf,b=w&&w(w(O([])));b&&b!==n&&r.call(b,a)&&(g=b);var x=m.prototype=y.prototype=Object.create(g);function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function D(t){var e;this._invoke=function(n,o){function a(){return new Promise(function(e,a){!function e(n,o,a,i){var s=c(t[n],t,o);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,i)},function(t){e("throw",t,a,i)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},function(t){return e("throw",t,a,i)})}i(s.arg)}(n,o,e,a)})}return e=e?e.then(a,a):a()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,p;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:P}}function P(){return{value:e,done:!0}}return v.prototype=x.constructor=m,m.constructor=v,m[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(D.prototype),D.prototype[i]=function(){return this},t.AsyncIterator=D,t.async=function(e,n,r,o){var a=new D(u(e,n,r,o));return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},k(x),x[s]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n,r;
/*!
	Wheelzoom 4.0.0
	license: MIT
	http://www.jacklmoore.com/wheelzoom
*/
window.wheelzoom=(n={zoom:.1,maxZoom:!1,initialZoom:1},r=function(t,e){if(t&&t.nodeName&&"IMG"===t.nodeName){var r,o,a,i,s,u,c,l,d={},h=function(e){t.removeEventListener("wheelzoom.destroy",h),t.removeEventListener("wheelzoom.reset",p),t.removeEventListener("load",w),t.removeEventListener("mouseup",m),t.removeEventListener("mousemove",v),t.removeEventListener("mousedown",g),t.removeEventListener("wheel",y),t.style.backgroundImage=e.backgroundImage,t.style.backgroundRepeat=e.backgroundRepeat,t.src=e.src}.bind(null,{backgroundImage:t.style.backgroundImage,backgroundRepeat:t.style.backgroundRepeat,src:t.src});t.addEventListener("wheelzoom.destroy",h),e=e||{},Object.keys(n).forEach(function(t){d[t]=void 0!==e[t]?e[t]:n[t]}),t.complete&&w(),t.addEventListener("load",w)}function f(){s>0?s=0:s<r-a&&(s=r-a),u>0?u=0:u<o-i&&(u=o-i),t.style.backgroundSize=a+"px "+i+"px",t.style.backgroundPosition=s+"px "+u+"px"}function p(){a=r,i=o,s=u=0,f()}function y(e){var n=0;e.preventDefault(),e.deltaY?n=e.deltaY:e.wheelDelta&&(n=-e.wheelDelta);var c=t.getBoundingClientRect(),l=e.pageX-c.left-window.pageXOffset,h=e.pageY-c.top-window.pageYOffset,y=(l-s)/a,v=(h-u)/i;n<0?(a+=a*d.zoom,i+=i*d.zoom):(a-=a*d.zoom,i-=i*d.zoom),d.maxZoom&&(a=Math.min(r*d.maxZoom,a),i=Math.min(o*d.maxZoom,i)),s=l-a*y,u=h-i*v,a<=r||i<=o?p():f()}function v(t){t.preventDefault(),t.stopPropagation(),s+=t.pageX-c.pageX,u+=t.pageY-c.pageY,c=t,f()}function m(t){t.stopPropagation(),t.preventDefault(),document.removeEventListener("mouseup",m),document.removeEventListener("mousemove",v)}function g(t){t.preventDefault(),c=t,document.addEventListener("mousemove",v),document.addEventListener("mouseup",m)}function w(){var e=Math.max(d.initialZoom,1);if(t.src!==l){var n=window.getComputedStyle(t,null);r=parseInt(n.width,10),o=parseInt(n.height,10),s=-((a=r*e)-r)/2,u=-((i=o*e)-o)/2,function(t){t.style.backgroundRepeat="no-repeat",t.style.backgroundImage='url("'+t.src+'")',l="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+t.naturalWidth+'" height="'+t.naturalHeight+'"></svg>'),t.src=l}(t),t.style.backgroundSize=a+"px "+i+"px",t.style.backgroundPosition=s+"px "+u+"px",t.addEventListener("wheelzoom.reset",p),t.addEventListener("wheel",y),t.addEventListener("mousedown",g)}}},"function"!=typeof window.btoa?function(t){return t}:function(t,e){return t&&t.length?Array.prototype.forEach.call(t,r,e):t&&t.nodeName&&r(t,e),t})},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r,o=n(0),a=n.n(o),i=n(1),s=n.n(i),u=n(5),c=n.n(u),l=n(21),d=n.n(l);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e,n){var r=n.value;if("function"!=typeof r)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(h(r)));var o=!1;return{configurable:!0,get:function(){if(o||this===t.prototype||this.hasOwnProperty(e)||"function"!=typeof r)return r;var n=r.bind(this);return o=!0,Object.defineProperty(this,e,{configurable:!0,get:function(){return n},set:function(t){r=t,delete this[e]}}),o=!1,n},set:function(t){r=t}}}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t[e]||!1===t[e]){var r=t[e];return"true"==r||"false"!=r&&(isNaN(r)?t[e]:+r)}return n}function y(t,e){if(Array.isArray(e)||(e=[e]),t){for(var n=0;n<e.length;n++)if(!t[e[n]])return!1;return!0}return!1}var v=(r=function(){function t(e){a()(this,t),this.token=e,this.baseUrl="https://data.oceannetworks.ca/",this.proxyUrl="http://onc.danycabrera.com/proxy.php",this._axios=d.a.create({method:"get",baseURL:this.baseUrl,timeout:12e4}),this.getLocations=this.getLocations.bind(this),this.getDevices=this.getDevices.bind(this),this.getDeviceCategories=this.getDeviceCategories.bind(this),this.getProperties=this.getProperties.bind(this),this.getDeployments=this.getDeployments.bind(this),this.getDataProducts=this.getDataProducts.bind(this)}return s()(t,[{key:"doRequest",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.token=this.token;var o={url:t,params:e};if(r&&(o.headers={"X-Proxy-Url":this.baseUrl+t},o.url=this.proxyUrl),"api/download"==e.method&&e.extension)switch(e.extension){case"txt":o.responseType="text";break;case"json":o.responseType="json";break;case"csv":o.responseType="text";break;default:o.responseType="blob"}return new Promise(function(t,e){n._axios.request(o).then(function(n){0===n.data.length&&e("empty"),t(n)},function(t){e(t)})})}},{key:"getUrlFromResponse",value:function(t){var e=t.request.responseURL;this.useProxy&&(e=t.config.headers["X-Proxy-Url"]+e.substr(this.proxyUrl.length));return e}},{key:"errorToString",value:function(t){var e=t.response,n="<b>Error:</b> ".concat(e.statusText,"<br><b>Code:</b> ").concat(e.status,"<br>");if(e.data&&e.data.errors){n+="<ul>";var r=!0,o=!1,a=void 0;try{for(var i,s=e.data.errors[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;u.parameter?n+="<li><b>".concat(u.errorMessage,"</b>: ").concat(u.parameter,"</li>"):n+="<li>".concat(u.errorMessage,"</li>")}}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}n+="</ul>"}return n}},{key:"useApiProxy",value:function(){this.baseUrl="https://data.oceannetworks.ca/apiproxy/",this._axios.defaults.baseURL=this.baseUrl}},{key:"getLocations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return t.method=e,this.doRequest("api/locations",t)}},{key:"getDevices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return t.method=e,this.doRequest("api/devices",t)}},{key:"getDeployments",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return t.method=e,this.doRequest("api/deployments",t)}},{key:"getDeviceCategories",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return t.method=e,this.doRequest("api/deviceCategories",t)}},{key:"getProperties",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return t.method=e,this.doRequest("api/properties",t)}},{key:"getDataProducts",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return t.method=e,this.doRequest("api/dataProducts",t)}},{key:"productRequest",value:function(t){return t.method="request",this.doRequest("api/dataProductDelivery",t)}},{key:"productRun",value:function(t){return t.method="run",this.doRequest("api/dataProductDelivery",t)}},{key:"productStatus",value:function(t){return t.method="status",this.doRequest("api/dataProductDelivery",t)}},{key:"productDownload",value:function(t){return t.method="download",this.doRequest("api/dataProductDelivery",t)}},{key:"getProductDownloadURL",value:function(t,e){return"".concat(this.baseUrl,"api/dataProductDelivery?method=download&token=").concat(this.token,"&dpRunId=").concat(t,"&index=").concat(e)}},{key:"getByLocation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"getByLocation";return t.method=e,this.doRequest("api/scalardata",t)}},{key:"getRawData",value:function(t){if(y(t,["locationCode","deviceCategoryCode"]))t.method="getByLocation";else{if(!y(t,"deviceCode"))throw Error("The rawdata service requires either deviceCode, or a compbiantion of locationCode and deviceCategoryCode.");t.method="getByDevice"}return this.doRequest("api/rawdata",t)}},{key:"getScalarPlotting",value:function(t){return this.doRequest("ScalarDataAPIService",t)}}]),t}(),c()(r.prototype,"getLocations",[f],Object.getOwnPropertyDescriptor(r.prototype,"getLocations"),r.prototype),c()(r.prototype,"getDevices",[f],Object.getOwnPropertyDescriptor(r.prototype,"getDevices"),r.prototype),c()(r.prototype,"getDeployments",[f],Object.getOwnPropertyDescriptor(r.prototype,"getDeployments"),r.prototype),c()(r.prototype,"getDeviceCategories",[f],Object.getOwnPropertyDescriptor(r.prototype,"getDeviceCategories"),r.prototype),c()(r.prototype,"getProperties",[f],Object.getOwnPropertyDescriptor(r.prototype,"getProperties"),r.prototype),c()(r.prototype,"getDataProducts",[f],Object.getOwnPropertyDescriptor(r.prototype,"getDataProducts"),r.prototype),c()(r.prototype,"productRequest",[f],Object.getOwnPropertyDescriptor(r.prototype,"productRequest"),r.prototype),c()(r.prototype,"productRun",[f],Object.getOwnPropertyDescriptor(r.prototype,"productRun"),r.prototype),c()(r.prototype,"productStatus",[f],Object.getOwnPropertyDescriptor(r.prototype,"productStatus"),r.prototype),c()(r.prototype,"productDownload",[f],Object.getOwnPropertyDescriptor(r.prototype,"productDownload"),r.prototype),c()(r.prototype,"getProductDownloadURL",[f],Object.getOwnPropertyDescriptor(r.prototype,"getProductDownloadURL"),r.prototype),c()(r.prototype,"getByLocation",[f],Object.getOwnPropertyDescriptor(r.prototype,"getByLocation"),r.prototype),c()(r.prototype,"getScalarPlotting",[f],Object.getOwnPropertyDescriptor(r.prototype,"getScalarPlotting"),r.prototype),r),m=n(2),g=n.n(m),w=n(3),b=n.n(w),x=n(4),k=n.n(x),D=n(7),S=n.n(D),C=n(10),T=n.n(C);function L(t){return!isNaN(parseFloat(t))&&isFinite(t)}S.a.extend(T.a);var O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a()(this,t),""==e&&(e=E("now")),this.text=e,this.isRelative=!1,this.offset={operation:"",unit:"",quantity:0},this.parsedString="",this._unitNames=["y","M","w","d","h","m","s"];try{this.parsedString=this.parse(e)}catch(t){throw t}}return s()(t,[{key:"parse",value:function(t){try{if(""==t)throw new Error("Tried to parse an empty date string.");var e=t.length;if(this.isValidISO8601(t))return t;var n=E(t);if(""!=n)return n;if(function(t){return S()(t).isValid()}(t))return function(t){return S()(t).format("YYYY-MM-DDTHH:mm:ss.SSS")+"Z"}(t);this.isRelative=!0;var r=t.charAt(e-1);if(!this.isValidUnit(r))throw new Error('Unrecognized date format: "'.concat(t,'"'));var o="";if("last"==t.substr(0,4))o="last";else if("plus"==t.substr(0,4))o="plus";else{if("minus"!=t.substr(0,5))throw new Error('Unrecognized date format: "'.concat(t,'"'));o="minus"}var a=t.substring(o.length,e-1);if(!L(a))throw new Error('Unrecognized date format: "'.concat(t,'"'));this.offset={operation:o,unit:r,quantity:parseInt(a,10)}}catch(t){throw t}return""}},{key:"isValidUnit",value:function(t){return this._unitNames.indexOf(t)>-1}},{key:"isValidISO8601",value:function(t){return/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/.test(t)}},{key:"offsetFrom",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.isRelative)return this.toString();var e,n=t?S.a.utc(t.toString()):S.a.utc(),r=this.offset;return"last"==r.operation?e=n.subtract(r.quantity,r.unit):"plus"==r.operation?e=n.add(r.quantity,r.unit):"minus"==r.operation&&(e=n.subtract(r.quantity,r.unit)),e.format("YYYY-MM-DDTHH:mm:ss.SSS")+"Z"}},{key:"toString",value:function(){return this.parsedString}}]),t}();function P(t,e){var n=null,r=null,o=null,a=null;try{n=t?new O(t):null,r=e?new O(e):null}catch(t){throw t}return n&&(o=n.offsetFrom(r)),r&&(a=r.offsetFrom(n)),{dateFrom:o,dateTo:a}}function R(t){if(0==t)return"less than a second";var e=parseInt(t,10),n=Math.floor(e/3600),r=Math.floor((e-3600*n)/60),o=e-3600*n-60*r,a="";return n>0&&(a+="".concat(n," hours ")),r>0&&(a+="".concat(r," minutes ")),o>0&&(a+="".concat(o," seconds")),a}function E(t){switch(t){case"now":return S.a.utc().format("YYYY-MM-DDTHH:mm:ss.SSS")+"Z";case"today":return M(S()()).utc().format("YYYY-MM-DDTHH:mm:ss.SSS")+"Z";case"yesterday":return M(S()().subtract(1,"days")).utc().format("YYYY-MM-DDTHH:mm:ss.SSS")+"Z"}return""}function M(t){return t=(t=(t=(t=t.set("hour",0)).set("minute",0)).set("second",0)).set("millisecond",0)}S.a.extend(T.a);var N=n(11),_=n.n(N);var A=function(){function t(){a()(this,t),this.userDates={dateFrom:null,dateTo:null},this.parsedDates={dateFrom:null,dateTo:null},this.warnings=[],this.errors=[]}return s()(t,[{key:"parse",value:function(t){var e=this.gatherTagAttributes(t);e.filters={};var n=t.closest(".oncWidgetGroup");if(n){var r=this.gatherTagAttributes(n);for(var o in""==e.type&&""!=r.type&&(e.type=r.type),""==e.source&&""!=r.source&&(e.source=r.source),r.attributes)e.attributes[o]||(e.attributes[o]=r.attributes[o]);for(var a in r.engine)e.engine[a]||(e.engine[a]=r.engine[a]);for(var i in r.options)e.options[i]||(e.options[i]=r.options[i])}if(""==e.type)return this.fatal("No <b>data-widget</b> attribute found in this data widget.");""==e.source&&(e.source=function(t){switch(t){case"locations":case"deployments":case"deviceCategories":case"devices":case"properties":case"dataProducts":return"discovery";case"download":case"image":return"dataProductDelivery";case"plot":return"scalardata";case"rawValue":return"rawdata";default:return""}}(e.type));var s=function(t,e){switch(t){case"plottingUtility":return{sensorId:null,dateFrom:void 0,dateTo:E("now"),points:300,x:null,y:null};case"quickPlot":return{sensorId:void 0,dateFrom:void 0,dateTo:E("now"),plotTitle:"off"};case"json":return{path:void 0,x:null,y:null};case"scalardata":return{locationCode:void 0,deviceCategoryCode:void 0,deviceCode:null,propertyCode:null,sensorCategoryCodes:null,dateFrom:null,dateTo:null,x:null,y:null};case"rawdata":return{locationCode:null,deviceCategoryCode:null,deviceCode:null,rowLimit:null,sizeLimit:null,convertHexToDecimal:null,outputFormat:"object",getLatest:null,returnOptions:null,dateFrom:null,dateTo:null,x:null,y:null};case"dataProductDelivery":var n={dataProductCode:void 0,extension:void 0,dateFrom:E("today"),dateTo:E("now"),dataProductName:null,locationCode:null,deviceCategoryCode:null,deviceCode:null,propertyCode:null,dpo_qualityControl:"1",dpo_resample:"none",dpo_average:null,dpo_sensorstoinclude:null,x:null,y:null};switch(e){case"plot":n.dataProductCode="TSSD",n.extension="json",n.dpo_jsonOutputEncoding="OM",n.dpo_dataGaps="0";break;case"image":n.dataProductCode="TSSP",n.extension="png";break;case"download":n.dpo_dataGaps="1"}return n;case"discovery":switch(e){case"locations":return{sensorId:null,locationCode:null,deviceCategoryCode:null,deviceCode:null,propertyCode:null,dataProductCode:null,dateFrom:null,dateTo:null,locationName:null};case"deployments":return{sensorId:null,locationCode:null,deviceCategoryCode:null,deviceCode:null,propertyCode:null,dateFrom:null,dateTo:null};case"deviceCategories":return{sensorId:null,locationCode:null,deviceCategoryCode:null,deviceCategoryName:null,propertyCode:null};case"devices":return{locationCode:null,deviceCategoryCode:null,deviceCode:null,deviceName:null,deviceId:null,propertyCode:null,dataProductCode:null,dateFrom:null,dateTo:null,locationName:null};case"properties":return{sensorId:null,locationCode:null,deviceCategoryCode:null,deviceCode:null,propertyCode:null,propertyName:null,description:null};case"dataProducts":return{sensorId:null,dataProductCode:null,extension:null,dataProductName:null,locationCode:null,deviceCategoryCode:null,deviceCode:null,propertyCode:null}}break;default:return{}}}(e.source,e.type);this.copyIfExists(e.attributes,e.filters,Object.keys(s)),e.filters.dateFrom&&!e.filters.dateTo&&(e.filters.dateTo="now"),this.userDates.dateFrom=e.filters.dateFrom,this.userDates.dateTo=e.filters.dateTo;try{this.parsedDates=P(e.filters.dateFrom,e.filters.dateTo);var u=this.parsedDates;u.dateFrom&&(e.filters.dateFrom=u.dateFrom),u.dateTo&&(e.filters.dateTo=u.dateTo)}catch(t){return this.fatal(t)}for(var c in s)null==e.filters[c]&&null!==s[c]&&(e.filters[c]=s[c]);return this.validateFilters(e.filters,s,e.options),e}},{key:"gatherTagAttributes",value:function(t){for(var e,n,r={type:"",source:"",attributes:{},options:{},engine:{}},o=["class","id","title","lang","style","tabindex","align","accesskey","contenteditable","dir","draggable","dropzone","translate","hidden"],a=t.dataset,i=t.attributes,s={},u=0;u<i.length;u++)e=i[u].name,""!=(n=i[u].value)&&"data-"!=e.substr(0,5)&&-1==o.indexOf(e)&&(s[e]=n);for(var c in a)""!=a[c]&&(s[c]=a[c]);for(var l in s)"widget"==l?r.type=s.widget:"source"==l?r.source=s.source:"engine"==l?r.engine=this.parseOptionsString(s.engine):"options"==l?r.options=this.parseOptionsString(s.options):r.attributes[l]=s[l];return r}},{key:"validateFilters",value:function(t,e,n){var r=["widget","options","source"];for(var o in e)r.push(o),void 0===e[o]&&(t[o]||this.errors.push("Missing mandatory filter: <b>".concat(o,"</b>")))}},{key:"copyIfExists",value:function(t,e,n){var r,o;for(r=0;r<n.length;r++)t[o=n[r].toLowerCase()]&&(e[n[r]]=t[o])}},{key:"parseOptionsString",value:function(t){try{var e,n,r,o={},a=t.split(","),i=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){var d=c.value;if(2!=(e=d.split(":")).length)throw new Error('Illegal syntax near "'.concat(d,'"'));switch(n=e[0].trim(),r=e[1].trim()){case"true":o[n]=!0;break;case"false":o[n]=!1;break;default:o[n]=r}}}catch(t){s=!0,u=t}finally{try{i||null==l.return||l.return()}finally{if(s)throw u}}return o}catch(t){throw new Error("Check that special configuration attributes (engine, options) have the right format.<br>".concat(t.name,": ").concat(t.message,"."))}}},{key:"fatal",value:function(t){return this.errors.push(t),!1}}]),t}();function q(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="",o=""!=n?n.split(","):[],a=t.length,i=o.length,s=0;s<a;s++)r+=i>0&&i>s?"<".concat(e,' class="').concat(o[s],'">').concat(t[s],"</").concat(e,">"):"<".concat(e,">").concat(t[s],"</").concat(e,">");return r}function j(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r='<table class="oncTable '.concat(n,'">');return r+="<thead>"+q(t,"th")+"</thead>",r+="<tbody>"+e+"</tbody></table>"}var U,I,F,$=n(61),B=function(){function t(e){a()(this,t),this.widget=e,this.render()}return s()(t,[{key:"render",value:function(){var t=this.widget,e=this.widget.ds?this.widget.ds.performance:null,n="",r="(no data)",o="(no data)";if(e&&(r=e.downloadTime,o=$(e.downloadSize)),t.options.showWarnings&&t.warnings.length>0){var a=q(t.warnings,"li"),i=q(t.ds.warnings,"li");n+='<div class="warnings"><ul>'.concat(a).concat(i,"</ul></div>")}if(n+='<span class="btShow" onClick="this.parentNode.classList.toggle(\'active\');" title="Show report">?</span>',n+='<div class="report">',n+="<h2>Widget report (".concat(t.type,")</h2>"),n+="<p><b>Status:</b> ".concat(t.status,"</p>"),Object.keys(t.filters).length>0){var s="";for(var u in t.filters)s+="<tr><td>".concat(u,"</td><td>").concat(t.filters[u],"</td></tr>");n+="<h3>Request parameters:</h3>"+j(["Key","Value"],s,"requestInfo")}else n+="<p>No request parameters interpreted.</p>";var c=["<b>Duration:</b> ".concat(r),"<b>Payload size:</b> ".concat(o)];if(t.ds){if(n+="<h3>Performance:</h3><ul>"+q(c=c.concat(e.messages),"li")+"</ul>",t.ds.requestURLs.length>0){var l="",d=!0,h=!1,f=void 0;try{for(var p,y=t.ds.requestURLs[Symbol.iterator]();!(d=(p=y.next()).done);d=!0){var v=p.value;l+='<li><a href="'.concat(v,'" target="_blank">').concat(v,"</a></li>")}}catch(t){h=!0,f=t}finally{try{d||null==y.return||y.return()}finally{if(h)throw f}}n+='<div class="requests"><h3>Request URLs:</h3><ol>'.concat(l,"</ol></div>")}}else n+="<p>No performance information available.</p>";n+="</div>",t.domFooterNode.innerHTML=n}}]),t}(),H=function(){function t(e,n){a()(this,t),this.domNode=e,this.cbkCancel=n}return s()(t,[{key:"showMessage",value:function(t,e){var n="";switch(t){case"api_error":n="Oceans 2.0 API error";break;case"error":n="Widget error";break;case"info":n="Information"}this.renderStatusBox(t,n,e),this.cbkCancel()}},{key:"showLoader",value:function(t,e){this.renderSpinner(t,e)}},{key:"renderStatusBox",value:function(t,e,n){this.domNode.innerHTML='<div class="statusMsg '.concat(t,'"><div class="header">').concat(e,'</div><div class="message">').concat(n,"</div></div>")}},{key:"renderSpinner",value:function(t,e){this.domNode.innerHTML='<div class="statusMsg '.concat(t,'">').concat('<div class="spinner la-line-scale-pulse-out"><div></div><div></div><div></div><div></div><div></div></div>','<div class="spinnerText">').concat(e,"</div></div>");var n=document.createElement("span");n.innerHTML="Cancel",n.classList.add("cancel"),n.onclick=this.cbkCancel,this.domNode.childNodes[0].appendChild(n)}},{key:"remove",value:function(){var t=this.domNode.querySelector("div.statusMsg");t&&t.parentNode.removeChild(t)}}]),t}(),Y=(U=function(){function t(e,n,r){a()(this,t),_()(t,this,"download","renderContents"),this.idx=e,this.filters={},this._onc=r,this.type="",this.source="",this.ds=null,this.parser=new A,this.statusBox=null,this.status="normal",this.loaderIsVisible=!0,this.domBaseNode=n,this.domNode=null,this.domFooterNode=null,this.options={report:!1,showWarnings:!0,theme:"default",engine:{}},this.warnings=[],this.cancelled=!1;try{this.parse(this.domBaseNode),this.prepareWidget(),this.statusBox=new H(this.domNode,this.cancel)}catch(t){this.statusBox=new H(this.domBaseNode,this.cancel),this.showStatus("error",t.message),this.cancel()}}return s()(t,[{key:"parse",value:function(t){try{var e=this.parser.parse(t);if(this.parser.errors.length>0)throw new Error(this.parser.errors.join("<br>"));this.type=e.type,this.source=e.source,this.filters=e.filters,this.addOptions(e.options),this.options.engine=e.engine}catch(t){throw this.cancel(),console.log(t),new Error("<b>Parsing error:</b><p>".concat(t.message,"</p>"))}}},{key:"addOptions",value:function(t){for(var e in t)this.options[e]=t[e]}},{key:"prepareWidget",value:function(){this.domBaseNode.classList.add("theme_".concat(this.options.theme)),this.domBaseNode.classList.add("widget_".concat(this.type)),this.domBaseNode.innerHTML='<div class="contents"></div><div class="footer"></div>',this.domNode=this.domBaseNode.querySelector("div.contents"),this.domFooterNode=this.domBaseNode.querySelector("div.footer")}},{key:"render",value:function(){this.renderContents(),this.options.report&&new B(this);var t=!!this.options.download&&this.options.download;if("plot"==this.type&&t){var e=document.createElement("button");e.type="button",e.className="btDownload",e.title="Download data (CSV)",e.innerHTML="&#8681;",e.onclick=this.ds.saveDataToFile,this.domFooterNode.appendChild(e)}}},{key:"refreshDateRangeFilters",value:function(){var t=this.parser.userDates,e=P(t.dateFrom,t.dateTo);e.dateFrom&&(this.filters.dateFrom=e.dateFrom),e.dateTo&&(this.filters.dateTo=e.dateTo)}},{key:"showStatus",value:function(t,e){switch(this.domNode||this.prepareWidget(),t){case"error":this.status="error";break;case"api_error":this.status="api_error"}this.statusBox.showMessage(t,e),this.options.report&&new B(this)}},{key:"showLoader",value:function(t,e){this.loaderIsVisible&&this.statusBox.showLoader(t,e)}},{key:"cancel",value:function(){this.cancelled=!0,this.ds&&this.ds.cancel()}},{key:"addWarning",value:function(t){this.warnings.push("<b>Warning:</b> "+t)}}]),t}(),c()(U.prototype,"render",[f],Object.getOwnPropertyDescriptor(U.prototype,"render"),U.prototype),c()(U.prototype,"refreshDateRangeFilters",[f],Object.getOwnPropertyDescriptor(U.prototype,"refreshDateRangeFilters"),U.prototype),c()(U.prototype,"showStatus",[f],Object.getOwnPropertyDescriptor(U.prototype,"showStatus"),U.prototype),c()(U.prototype,"showLoader",[f],Object.getOwnPropertyDescriptor(U.prototype,"showLoader"),U.prototype),c()(U.prototype,"cancel",[f],Object.getOwnPropertyDescriptor(U.prototype,"cancel"),U.prototype),U),z="0",W="3",V="Dany Cabrera (dcabrera@oceannetworks.ca)",Z="MIT",G=function(t){function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return a()(this,e),(o=g()(this,b()(e).call(this,t,n,null))).code=r,o.message=i,o}return k()(e,t),s()(e,[{key:"download",value:function(){return new Promise(function(t){return t()})}},{key:"renderContents",value:function(){"version"==this.code?this.renderVersion():this.showStatus(this.code,this.message)}},{key:"renderVersion",value:function(){var t="<b>ONC Data Widgets Library</b><br>";t+="<b>Version:</b> ".concat(z,".").concat(W,"<br>"),t+="<b>Author:</b> ".concat(V,"<br>"),t+="<b>License:</b> ".concat(Z),this.showStatus("info",t)}}]),e}(Y),X=n(6),K=n.n(X),J=n(8),Q=n.n(J),tt=n(22),et=(I=function(){function t(e){a()(this,t),_()(t,this,"download"),this.name=e,this.data=null,this.cancelFlag=!1,this.performance={downloadStart:null,downloadEnd:null,downloadTime:"",downloadSize:0,messages:[]},this.userDates={dateFrom:null,dateTo:null},this.requestURLs=[],this.warnings=[]}return s()(t,[{key:"logDownloadStart",value:function(){this.performance.downloadStart=S()()}},{key:"logDownloadEnd",value:function(){this.performance.downloadEnd=S()();var t=this.performance.downloadEnd.diff(this.performance.downloadStart,"second");this.performance.downloadTime=R(t)}},{key:"saveDataToFile",value:function(){for(var t,e=this.data.length,n=this.data[0].data.values.length,r=this.data[0].data.valuesMin,o="SampleTime",a=0;a<e;a++)o+=","+(t=this.data[a].sensorName),r&&(o+=" (AVG), ".concat(t," (MIN), ").concat(t," (MAX)"));for(var i=0;i<n;i++){o+="\n"+this.data[0].data.sampleTimes[i];for(var s=0;s<e;s++)o+=","+this.data[s].data.values[i],r&&(o+=","+this.data[s].data.valuesMin[i],o+=","+this.data[s].data.valuesMax[i])}var u=new Blob([o],{type:"text/plain;charset=utf-8"}),c=new Date;Object(tt.saveAs)(u,"".concat(c.getTime(),".csv"))}},{key:"addRequestURL",value:function(t){this.requestURLs.push(t)}},{key:"addPerformanceMsg",value:function(t){this.performance.messages.push(t)}},{key:"addWarning",value:function(t){this.warnings.push("<b>Warning:</b> "+t)}},{key:"refreshDateRangeFilters",value:function(){if(this.filters){var t=P(this.userDates.dateFrom,this.userDates.dateTo);t.dateFrom&&(this.filters.dateFrom=t.dateFrom),t.dateTo&&(this.filters.dateTo=t.dateTo)}}},{key:"hasData",value:function(){return void 0!==this.data&&null!==this.data&&0!=this.data.length&&this.data.length>0}},{key:"cancel",value:function(){this.cancelFlag=!0}}]),t}(),c()(I.prototype,"saveDataToFile",[f],Object.getOwnPropertyDescriptor(I.prototype,"saveDataToFile"),I.prototype),c()(I.prototype,"refreshDateRangeFilters",[f],Object.getOwnPropertyDescriptor(I.prototype,"refreshDateRangeFilters"),I.prototype),I),nt=(F=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,"discovery")))._onc=t,o.filters=n,o.service="",o.cbkShowLoader=r,o}return k()(e,t),s()(e,[{key:"getDeviceCodeForId",value:function(t){var e=this;return console.log("1"),new Promise(function(n,r){e._onc.getDevices({deviceId:t}).then(function(t){if(e.cancelFlag)r("canceled");else{var o=t.data[0].deviceCode;console.log(o),n(o)}},function(t){return r(t)})})}},{key:"download",value:function(){var t=Q()(K.a.mark(function t(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.logDownloadStart(),console.log(this.filters,this.service),!this.filters.sensorId||"devices"==this.service){t.next=16;break}return e=this.filters.sensorId,this.cbkShowLoader("waiting","Getting deviceCode for id ".concat(e)),t.prev=5,t.next=8,this.getDeviceCodeForId(e);case 8:t.sent,t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(5),new Error("An error occurred while trying to get the device code for sensor with ID "+e);case 14:this.filters.deviceCode=deviceCode,delete this.filters.sensorId;case 16:this.cbkShowLoader("loading","Loading: ".concat(this.service)),t.t1=this.service,t.next="locations"===t.t1?20:"locationsTree"===t.t1?22:"deployments"===t.t1?24:"deviceCategories"===t.t1?26:"devices"===t.t1?28:"properties"===t.t1?30:"dataProducts"===t.t1?32:34;break;case 20:return t.abrupt("return",this.simpleRequest(this._onc.getLocations));case 22:return t.abrupt("return",this.simpleRequest(this._onc.getLocations,"getTree"));case 24:return t.abrupt("return",this.simpleRequest(this._onc.getDeployments));case 26:return t.abrupt("return",this.simpleRequest(this._onc.getDeviceCategories));case 28:return t.abrupt("return",this.simpleRequest(this._onc.getDevices));case 30:return t.abrupt("return",this.simpleRequest(this._onc.getProperties));case 32:return t.abrupt("return",this.simpleRequest(this._onc.getDataProducts));case 34:case"end":return t.stop()}},t,this,[[5,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"simpleRequest",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get";return new Promise(function(r,o){t(e.filters,n).then(function(t){e.cancelFlag?o("canceled"):(e.logDownloadEnd(),e.performance.downloadSize=t.request.responseText.length,e.data=t.data,e.saveRequestURL(t),r())},function(t){return o(t)})})}},{key:"saveRequestURL",value:function(t){t&&t.request&&this.requestURLs.push(this._onc.getUrlFromResponse(t))}},{key:"setService",value:function(t){this.service=t}}]),e}(et),c()(F.prototype,"download",[f],Object.getOwnPropertyDescriptor(F.prototype,"download"),F.prototype),c()(F.prototype,"simpleRequest",[f],Object.getOwnPropertyDescriptor(F.prototype,"simpleRequest"),F.prototype),F),rt=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new nt(r),o}return k()(e,t),s()(e,[{key:"download",value:function(){return this.showLoader("loading","Loading locations tree"),this.ds.request("locationsTree",this.filters)}},{key:"renderContents",value:function(){if(this.ds.hasData()){var t;t="ONC"==this.ds.data[0].locationCode?this.ds.data[0].children:this.ds.data;var e=document.createElement("table");e.className="oncTable",e.createTHead().insertRow(0).innerHTML=q(["locationName","locationCode","hasDeviceData","hasPropertyData"],"th");var n=e.createTBody(),r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;this.addRow(null,u,n)}}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}this.removeStatusMsg(),this.domNode.appendChild(e)}}},{key:"addRow",value:function(t,e,n){var r,o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=e.locationCode,u=e.dataSearchURL?'<a target="_blank" href="'.concat(e.dataSearchURL,'">').concat(e.locationName,"</a>"):e.locationName,c=q(['<span class="trail"></span>'.concat(u),s,e.hasDeviceData,e.hasPropertyData],"td","title"),l=n.insertRow(-1);if(l.classList.add("d_".concat(a)),a>0&&l.classList.add("child"),t&&l.setAttribute("data-parent",t),i&&l.classList.add("lastLeaf"),l.innerHTML=c,e.children){l.querySelector("span.trail").appendChild((r=s,(o=document.createElement("button")).type="button",o.title="Show children",o.innerHTML="&plus;",o.locationCode=r,o.onclick=function(t){var e=t.target.locationCode;document.querySelectorAll('tr[data-parent="'.concat(e,'"]')).forEach(function(t){t.classList.toggle("show")})},o));for(var d=e.children.length,h=0;h<d;h++)this.addRow(s,e.children[h],n,a+1,h==d-1)}}},{key:"filterRules",value:function(){return{locationCode:null,deviceCategoryCode:null,deviceCode:null,propertyCode:null,dataProductCode:null,dateFrom:null,dateTo:null,locationName:null}}}]),e}(Y),ot=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new nt(r,o.filters,o.showLoader),o.ds.setService("locations"),o}return k()(e,t),s()(e,[{key:"download",value:function(){return this.ds.download()}},{key:"renderContents",value:function(){if(this.ds.hasData()){var t="",e=!0,n=!1,r=void 0;try{for(var o,a=this.ds.data[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;t+="<tr>"+this.renderElement(i)+"</tr>"}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.domNode.innerHTML=j(["locationName","locationCode","deployments","depth","lat","lon","hasDeviceData","hasPropertyData"],t)}}},{key:"renderElement",value:function(t){return q([t.dataSearchURL?'<a target="_blank" href="'.concat(t.dataSearchURL,'">').concat(t.locationName,"</a>"):t.locationName,t.locationCode,t.deployments,t.depth,t.lat,t.lon,t.hasDeviceData,t.hasPropertyData],"td")}},{key:"filterRules",value:function(){return{locationCode:null,deviceCategoryCode:null,deviceCode:null,propertyCode:null,dataProductCode:null,dateFrom:null,dateTo:null,locationName:null}}}]),e}(Y),at=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new nt(r,o.filters,o.showLoader),o.ds.setService("deviceCategories"),o}return k()(e,t),s()(e,[{key:"download",value:function(){return this.ds.download()}},{key:"renderContents",value:function(){if(this.ds.hasData()){var t="",e=!0,n=!1,r=void 0;try{for(var o,a=this.ds.data[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;t+="<tr>"+this.renderElement(i)+"</tr>"}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.domNode.innerHTML=j(["deviceCategoryName","deviceCategoryCode","hasDeviceData"],t)}}},{key:"renderElement",value:function(t){var e=t.deviceCategoryName;return t.cvTerm&&t.cvTerm.deviceCategory&&t.cvTerm.deviceCategory.length>0&&(e='<a target="_blank" href="'.concat(t.cvTerm.deviceCategory[0].uri,'">').concat(e,"</a>")),q([e,t.deviceCategoryCode,t.hasDeviceData],"td")}}]),e}(Y),it=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new nt(r,o.filters,o.showLoader),o.ds.setService("devices"),o}return k()(e,t),s()(e,[{key:"download",value:function(){return this.ds.download()}},{key:"renderContents",value:function(){if(this.ds.hasData()){var t="",e=!0,n=!1,r=void 0;try{for(var o,a=this.ds.data[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;t+="<tr>"+this.renderElement(i)+"</tr>"}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.domNode.innerHTML=j(["deviceId","deviceName","deviceCode","hasDeviceData"],t)}}},{key:"renderElement",value:function(t){var e=t.deviceLink?'<a target="_blank" href="'.concat(t.deviceLink,'">').concat(t.deviceName,"</a>"):t.deviceName;return q([t.deviceId,e,t.deviceCode,t.hasDeviceData],"td")}}]),e}(Y),st=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new nt(r,o.filters,o.showLoader),o.ds.setService("properties"),o}return k()(e,t),s()(e,[{key:"download",value:function(){return this.ds.download()}},{key:"renderContents",value:function(){if(this.ds.hasData()){var t="",e=!0,n=!1,r=void 0;try{for(var o,a=this.ds.data[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;t+="<tr>"+this.renderElement(i)+"</tr>"}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.domNode.innerHTML=j(["propertyName","propertyCode","uom","hasDeviceData","hasPropertyData"],t)}}},{key:"renderElement",value:function(t){var e=t.propertyName;return t.cvTerm&&t.cvTerm.property&&t.cvTerm.property.length>0&&(e='<a target="_blank" href="'.concat(t.cvTerm.property[0].uri,'">').concat(e,"</a>")),q([e,t.propertyCode,t.uom,t.hasDeviceData,t.hasPropertyData],"td")}}]),e}(Y),ut=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new nt(r,o.filters,o.showLoader),o.ds.setService("deployments"),o}return k()(e,t),s()(e,[{key:"download",value:function(){return this.ds.download()}},{key:"renderContents",value:function(){if(this.ds.hasData()){var t="",e=!0,n=!1,r=void 0;try{for(var o,a=this.ds.data[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;t+="<tr>"+this.renderElement(i)+"</tr>"}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.domNode.innerHTML=j(["locationCode","deviceCode","begin","end","hasDeviceData","depth","lat","lon"],t)}}},{key:"renderElement",value:function(t){var e=t.end?t.end:"(unknown)",n=t.begin?t.begin:"(unknown)";return q([t.locationCode,t.deviceCode,n,e,t.hasDeviceData,t.depth,t.lat,t.lon],"td")}}]),e}(Y),ct=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new nt(r,o.filters,o.showLoader),o.ds.setService("dataProducts"),o}return k()(e,t),s()(e,[{key:"download",value:function(){return this.ds.download()}},{key:"renderContents",value:function(){if(this.ds.hasData()){var t="",e=!0,n=!1,r=void 0;try{for(var o,a=this.ds.data[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value;t+="<tr>"+this.renderElement(i)+"</tr>"}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.domNode.innerHTML=j(["dataProductName","dataProductCode","extension","hasDeviceData","hasPropertyData"],t)}}},{key:"renderElement",value:function(t){return q([t.helpDocument?'<a target="_blank" href="'.concat(t.helpDocument,'">').concat(t.dataProductName,"</a>"):t.dataProductName,t.dataProductCode,t.extension,t.hasDeviceData,t.hasPropertyData],"td")}}]),e}(Y);function lt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=t.split(e);if(n){for(var r in n)n[r]=n[r].trim();return n}return[t.trim()]}var dt,ht=function(){function t(e,n){a()(this,t),this.domNode=n,this.data={x:[],y:[],name:""},this.operation="",this.params=[],this._opsConfig={smooth:{run:this.opSmooth,params:["number"],defaults:[5]}},this._validOps=["smooth"],this.parsed=this.parse();var r=this.domNode.getAttribute("title");this.data.name=r||this.operation,this.opSmooth=this.opSmooth.bind(this)}return s()(t,[{key:"parse",value:function(){var t=this.domNode.dataset.operation;if(!new RegExp(/[a-zA-Z0-9_]+\([a-zA-Z0-9_,]*\)/g).exec(t))return!1;if(this.operation=t.substring(0,t.indexOf("(")),!this._validOps.includes(this.operation))return!1;var e=t.substring(this.operation.length+1,t.length-1);this.params=this._opsConfig[this.operation].defaults;for(var n=e.split(","),r=0;r<n.length;r++)this.params[r]=n[r];for(var o="",a=0;a<this.params.length;a++)"true"==(o=this.params[a].trim())?this.params[a]=!0:"false"==o?this.params[a]=!1:L(o)?this.params[a]=parseFloat(o):this.params[a]=o;return!0}},{key:"compute",value:function(t,e){switch(this.operation){case"smooth":this.opSmooth(t,e)}}},{key:"opSmooth",value:function(t,e){var n=e.length,r=this.params[0];if(r%2==0&&r++,this.data.x=t,n<=2)this.data.y=e;else{this.data.y=new Array(n);var o=0,a=0,i=0,s=0,u=0,c=(r-1)/2;for(o=0;o<n;o++){for(o<c?(s=0,u=o+o):(s=o-c,u=o+c),u>=n&&(u=n-1),i=0,a=s;a<=u;a++)i+=e[a];this.data.y[o]=i/(u-s+1)}}}}]),t}(),ft=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,"scalardata")))._onc=t,o.filters=n,o.requestPropCount=1,o.sensorCount=0,o.sampleCount=0,o.next=null,o.pages={count:0,timeAvg:0,timeStart:null,timeEnd:null,rangeAvg:0,rangeStart:null,rangeEnd:null,totalRange:0,avgTotalCount:0},o.cbkShowLoader=r,o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=this;return new Promise(function(){var e=Q()(K.a.mark(function e(n,r){var o,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=t.filters,a=S()(o.dateFrom),i=o.dateTo?S()(o.dateTo):S.a.utc(),t.pages.totalRange=a.diff(i,"second"),e.prev=4;case 5:return e.next=7,t.downloadPage(o);case 7:if(o=t.next?t.next.parameters:null,!t.cancelFlag){e.next=11;break}return r("canceled"),e.abrupt("return");case 11:if(t.next){e.next=5;break}case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r(e.t0);case 17:t.hasData()?(t.sensorCount=t.data.length,t.sampleCount=t.data[0].data.values.length,t.addPerformanceMsg("Downloaded ".concat(t.sensorCount," properties.")),t.addPerformanceMsg("Downloaded ".concat(t.sampleCount.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")," samples for each property.")),t.addPerformanceMsg("Data downloaded in ".concat(t.pages.count," pages.")),t.pages.count>1&&t.addPerformanceMsg("Pages carry data for an average time range of ".concat(R(t.pages.rangeAvg),".")),t.sensorCount<t.requestPropCount&&t.addWarning("The server only found data for ".concat(t.sensorCount," of the ").concat(t.requestPropCount," requested properties (").concat(t.filters.sensorCategoryCodes,") for the filters provided."))):t.addPerformanceMsg("No data downloaded."),n();case 19:case"end":return e.stop()}},e,null,[[4,14]])}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"downloadPage",value:function(){var t=Q()(K.a.mark(function t(e){var n=this;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){n.logPageDownloadStart(e),n.cbkShowLoader("loading","Loading plot data"),n._onc.getByLocation(e).then(function(e){if(n.cancelFlag)r("canceled");else if(e.data.sensorData){if(n.next=e.data.next,n.hasData())for(var o=[],a=[],i=0;i<e.data.sensorData.length;i++)o=n.data[i].data,a=e.data.sensorData[i].data,o.sampleTimes=o.sampleTimes.concat(a.sampleTimes),o.values=o.values.concat(a.values),o.qaqcFlags=o.values.concat(a.qaqcFlags);else n.data=e.data.sensorData,n.assignDataIds();if(n.pages.count++,n.performance.downloadSize+=e.request.responseText.length,n.logPageDownloadEnd(e.data.next),n.requestURLs.push(e.data.queryUrl),n.next){var s="Downloading data<br>page ".concat(n.pages.count+1," of &asymp;").concat(Math.ceil(n.pages.avgTotalCount));n.cbkShowLoader("loading",s)}t()}else r("empty")},function(t){console.log(t),t.response&&t.response.data&&n.requestURLs.push(n._onc.getUrlFromResponse(t.response)),r(t)})}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"assignDataIds",value:function(){var t,e,n,r=[];this.filters.sensorCategoryCodes?r=this.filters.sensorCategoryCodes.split(","):this.filters.propertyCode&&(r=[this.filters.propertyCode]);for(var o=0;o<r.length;o++)r[o]=r[o].toLowerCase();for(var a=0;a<this.data.length;a++)e=(t=this.data[a]).sensorCode.toLowerCase(),n=t.sensorCategoryCode.toLowerCase(),r.includes(e)?this.data[a].id=e:r.includes(e)?this.data[a].id=n:this.data[a].id=t.sensorName.toLowerCase()}},{key:"disconnectDataHoles",value:function(){var t,e,n,r=this.data[0].sampleTimes.length-1,o=moment(this.data[0].sampleTimes[0],moment.ISO_8601),a=moment(this.data[0].sampleTimes[1],moment.ISO_8601),i=moment(this.data[0].sampleTimes[2],moment.ISO_8601);for(e=a.diff(o),t=1;t<r;t++)(n=i.diff(a))>30*e&&(this.sensorData.values[t]=null),o=a,a=i,i=moment(this.data[0].sampleTimes[t+2],moment.ISO_8601),e=n}},{key:"logPageDownloadStart",value:function(t){this.pages.rangeStart=S()(t.dateFrom),this.pages.timeStart=S()()}},{key:"logPageDownloadEnd",value:function(t){this.pages.timeEnd=S()();var e=this.pages.timeEnd.diff(this.pages.timeStart,"second"),n=this.pages.timeAvg;if(this.pages.timeAvg=0==n?e:.5*(n+e),t&&t.parameters.dateFrom){var r=S()(t.parameters.dateFrom);this.pages.rangeEnd=r;var o=this.pages.rangeStart.diff(this.pages.rangeEnd,"second"),a=this.pages.rangeAvg;if(0==a)this.pages.rangeAvg=o;else{var i=this.pages.count;this.pages.rangeAvg=(1-1/i)*a+1/i*o}this.pages.avgTotalCount=this.pages.totalRange/this.pages.rangeAvg}}}]),e}(et);S.a.extend(T.a);var pt=(dt=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,"plottingUtility")))._onc=t,o.filters=n,o.sensorIds=[],o.initSensorIds(),o.cbkShowLoader=r,o}return k()(e,t),s()(e,[{key:"initSensorIds",value:function(){var t=this.filters;if(!t.sensorId&&!t.x&&!t.y)throw new Error("This data source requires either the <b>sensorId</b> parameter, or both <b>x</b> and <b>y</b> parameters.");if(-1!=t.sensorId.indexOf(",")){var e=t.sensorId.split(","),n=!0,r=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;this.sensorIds.push(s.trim())}}catch(t){r=!0,o=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}else t.sensorId&&this.sensorIds.push(t.sensorId.trim())}},{key:"downloadSensor",value:function(){var t=Q()(K.a.mark(function t(e,n){var r=this;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.sensorid=e,t.abrupt("return",new Promise(function(t,o){r.cbkShowLoader("loading","Downloading sensor ".concat(e)),r._onc.getScalarPlotting(n).then(function(n){if(r.requestURLs.push(r._onc.getUrlFromResponse(n)),n.data&&0==n.data.statusCode)r.addData(n.data.payload,e),t(n);else switch(n.data.statusCode){case 105:o(new Error("Failed to obtain data for sensor ".concat(e," with the provided filters.")));default:o(new Error("The data request for sensor ".concat(e," failed.")))}},function(t){t.response&&t.response.data&&r.requestURLs.push(r._onc.getUrlFromResponse(t.response)),o(t)})}));case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"download",value:function(){var t=Q()(K.a.mark(function t(){var e,n=this;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.data=[],e={datefrom:S.a.utc(this.filters.dateFrom).format("DD-MMM-YYYY HH:mm:ss"),dateto:S.a.utc(this.filters.dateTo).format("DD-MMM-YYYY HH:mm:ss"),option:3,isClean:!0,plotpoints:this.filters.points},t.abrupt("return",new Promise(function(){var t=Q()(K.a.mark(function t(r,o){var a,i,s,u,c,l,d,h;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.logDownloadStart(),n.cbkShowLoader("loading","Loading plot data"),a=0,i=!0,s=!1,u=void 0,t.prev=6,c=n.sensorIds[Symbol.iterator]();case 8:if(i=(l=c.next()).done){t.next=24;break}return d=l.value,t.prev=10,t.next=13,n.downloadSensor(d,e);case 13:h=t.sent,a+=h.request.responseText.length,t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(10),o(t.t0),t.abrupt("return");case 21:i=!0,t.next=8;break;case 24:t.next=30;break;case 26:t.prev=26,t.t1=t.catch(6),s=!0,u=t.t1;case 30:t.prev=30,t.prev=31,i||null==c.return||c.return();case 33:if(t.prev=33,!s){t.next=36;break}throw u;case 36:return t.finish(33);case 37:return t.finish(30);case 38:n.logDownloadEnd(),n.performance.downloadSize=a,r(n.data);case 41:case"end":return t.stop()}},t,null,[[6,26,30,38],[10,17],[31,,33,37]])}));return function(e,n){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"addData",value:function(t,e){var n=t.data.length,r=t.name,o=t.uofm;this.data.push({sensorName:r,id:e,unitOfMeasure:o,data:{sampleTimes:new Array(n),values:new Array(n),valuesMin:new Array(n),valuesMax:new Array(n),qaqcFlags:new Array(n)}});for(var a=this.data.length-1,i=0;i<n;i++)this.data[a].data.sampleTimes[i]=new Date(t.data[i][0]).toISOString(),""===t.data[i][3]?(this.data[a].data.valuesMin[i]=null,this.data[a].data.valuesMax[i]=null,this.data[a].data.values[i]=null,this.data[a].data.qaqcFlags[i]=null):(this.data[a].data.valuesMin[i]=t.data[i][1],this.data[a].data.valuesMax[i]=t.data[i][2],this.data[a].data.values[i]=t.data[i][3],this.data[a].data.qaqcFlags[i]=t.data[i][4])}}]),e}(et),c()(dt.prototype,"download",[f],Object.getOwnPropertyDescriptor(dt.prototype,"download"),dt.prototype),c()(dt.prototype,"addData",[f],Object.getOwnPropertyDescriptor(dt.prototype,"addData"),dt.prototype),dt);function yt(t){return["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#393b79","#637939","#e7ba52","#843c39","#d6616b","#7b4173","#636363","#000000"].slice(0,t)}var vt,mt,gt,wt,bt,xt,kt=function(){function t(e,n,r){a()(this,t),_()(t,this,"prepareDataset","prepareLayout","render","isEngineAvailable"),this.datas=[],this.plotCount=0,this.domNode=e,this.name=n,this.config=r,this.CDN="",this.vendorURL="",this.colors=[],this.colorDefaults=yt(12),this.parseColors()}return s()(t,[{key:"parseColors",value:function(){this.colors=this.colorDefaults;var t=this.getOption("colors",null);if(t){var e=t.split(";");if(e)for(var n=0;n<e.length;n++)this.colors[n]=e[n];else this.colors[0]=t}}},{key:"isTimeSeries",value:function(){return"time"==this.controlVariable}},{key:"colorForIndex",value:function(t){return t<this.colorDefault.length?this.colorDefault[t]:this.colorDefault[t-this.colorDefault.length]}},{key:"errorUnavailable",value:function(){return new Error('<p>The plot engine <b>"'.concat(this.name,'"</b> is unavailable.</p>\n\t\t<p>You can add this library as a <em>&lt;script&gt;</em> with the <em>src</em>: <a href="').concat(this.CDN,'" target="_BLANK">').concat(this.CDN,'</a></p>\n\t\t<p>You can also obtain the original library at <a href="').concat(this.vendorURL,'" target="_BLANK">').concat(this.vendorURL,"</a>.</p>"))}},{key:"getOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.config.engine[t]||!1===this.config.engine[t]?this.config.engine[t]:e}}]),t}(),Dt=function(t){function e(t,n){var r;return a()(this,e),(r=g()(this,b()(e).call(this,t,"plotly",n))).CDN="http://onc.danycabrera.com/engines/plotly.min.js",r.vendorURL="https://github.com/plotly/plotly.js",r.options={mode:r.getOption("mode",r.config.isTimeSeries?"lines":"markers"),stack:r.getOption("stack","none"),stackTitles:r.getOption("stackTitles",!0),reversed:r.getOption("reversed",!1)},r.independentAxisTitle="",r.layout={},r}return k()(e,t),s()(e,[{key:"prepareDataset",value:function(t){this.config.isTimeSeries?this.prepareTimeSeries(t):this.prepareXY(t),this.prepareLayout()}},{key:"prepareTimeSeries",value:function(t){for(var e=null,n="y",r="x",o=t.length,a=this.options.stack,i=0;i<o;i++)e=t[i],"rows"==a&&i>0?n="y"+(i+1):"columns"==a&&i>0&&(r="x"+(i+1)),this.datas.push({type:"scatter",mode:this.mode,name:"".concat(e.sensorName," [").concat(e.unitOfMeasure,"]"),x:e.data.sampleTimes,y:e.data.values,xaxis:r,yaxis:n})}},{key:"prepareXY",value:function(t){for(var e=null,n=t.length,r=this.config,o="x"==r.independent,a=[],i=o?r.x[0]:r.y[0],s=0;s<n;s++)if(t[s].id==i){a=t[s].data.values,this.independentAxisTitle="".concat(t[s].sensorName," [").concat(t[s].unitOfMeasure,"]");break}var u=0;this.datas=new Array(n-1);for(var c=0;c<n;c++)t[c].id!=i&&(e=t[c],this.datas[u]={type:"scatter",mode:this.options.mode,name:"".concat(e.sensorName," [").concat(e.unitOfMeasure,"]"),x:o?a:e.data.values,y:o?e.data.values:a},u++)}},{key:"prepareLayout",value:function(){this.parseColors();var t={family:"Arial, Sans",size:10,color:"black"},e=this.config,n="x"==e.independent,r=e.engine,o=this.datas.length,a={showlegend:!0,colorway:this.colors,legend:{yanchor:"top",y:1.1,orientation:"h"},xaxis:{automargin:!0,type:"date",showline:!0,zeroline:!1},yaxis:{automargin:!0,showline:!0,zeroline:!1,type:"linear"},connectgaps:!1,margin:{l:55,r:55,b:40,t:30,pad:0}};if(e.isTimeSeries?a.xaxis.title={text:"Time"}:a.xaxis.type="linear",this.options.reversed&&(a.yaxis.autorange="reversed",a.xaxis.side="top"),1==o)e.isTimeSeries?(a.showlegend=!1,a.yaxis.title={text:this.datas[0].name,font:{family:"Arial, Sans",size:12,color:this.colors[0]}}):(a.showlegend=!1,a.xaxis.title={text:this.independentAxisTitle,font:{family:"Arial, Sans",size:12,color:"#000000"}},a.yaxis.title={text:this.datas[0].name,font:{family:"Arial, Sans",size:12,color:"#000000"}});else if(o>1&&(e.isTimeSeries||(n?a.xaxis.title={text:this.independentAxisTitle,font:{family:"Arial, Sans",size:12,color:"#000000"}}:a.yaxis.title={text:this.independentAxisTitle,font:{family:"Arial, Sans",size:12,color:"#000000"}}),r.stack))switch(this.options.stackTitles&&(a.showlegend=!1),r.stack){case"rows":for(var i,s=0;s<o;s++)a[i="yaxis"+(0==s?"":s+1)]={showline:!0,zeroline:!1,side:s%2!=0?"right":"left",tickfont:t},this.options.stackTitles&&(a[i].title={text:this.datas[s].name,font:{family:"Arial, Sans",size:12,color:this.colors[s]}});a.grid={rows:o,columns:1};break;case"columns":for(var u,c=0;c<o;c++)a[u="xaxis"+(0==c?"":c+1)]={showline:!0,tickfont:t},this.options.stackTitles&&(a[u].title={text:this.datas[c].name,font:{family:"Arial, Sans",size:12,color:this.colors[c]}});a.grid={rows:1,columns:o}}this.layout=a}},{key:"render",value:function(){Plotly.newPlot(this.domNode,this.datas,this.layout,{responsive:!0})}},{key:"isEngineAvailable",value:function(){return!("undefined"==typeof Plotly)}}]),e}(kt),St=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,"dygraphs",n,r))).CDN="http://onc.danycabrera.com/engines/dygraphs.min.js",o.vendorURL="http://dygraphs.com",o.options={rollPeriod:o.getOption("rollPeriod",0),animatedZooms:o.getOption("animatedZooms",!0),showRangeSelector:o.getOption("showRangeSelector",!1)},o.hasErrorInterval=!1,o.labels=["time"],o.yLabels=[],o.layout={},o}return k()(e,t),s()(e,[{key:"prepareDataset",value:function(t){var e,n;this.plotCount=t.length;var r=t[0].data.values.length;this.datas=new Array(r);for(var o=0;o<this.plotCount;o++)e=t[o].sensorName,n=t[o].unitOfMeasure,this.labels.push(e),this.yLabels.push("".concat(e," [").concat(n,"]"));if(this.hasErrorInterval=t[0].data.valuesMin,this.hasErrorInterval)for(var a=0;a<r;a++){this.datas[a]=new Array(1+this.plotCount),this.datas[a][0]=new Date(t[0].data.sampleTimes[a]);for(var i=0;i<this.plotCount;i++)this.datas[a][i+1]=[t[i].data.valuesMin[a],t[i].data.values[a],t[i].data.valuesMax[a]]}else for(var s=0;s<r;s++){this.datas[s]=new Array(1+this.plotCount),this.datas[s][0]=new Date(t[0].data.sampleTimes[s]);for(var u=0;u<this.plotCount;u++)this.datas[s][u+1]=t[u].data.values[s]}}},{key:"prepareLayout",value:function(){this.layout={rollPeriod:this.options.rollPeriod,labels:this.labels,hideOverlayOnMouseOut:!1,customBars:this.hasErrorInterval,fillAlpha:.3,axisLabelFontSize:12,colors:this.colors,animatedZooms:this.options.animatedZooms,showRangeSelector:this.options.showRangeSelector},console.log(this.options.animatedZooms),1==this.plotCount?this.layout.ylabel='<span style="color:'.concat(this.colors[0],'">').concat(this.yLabels[0],"</span>"):2==this.plotCount?(this.layout.ylabel='<span style="color:'.concat(this.colors[0],'">').concat(this.yLabels[0],"</span>"),this.layout.y2label='<span style="color:'.concat(this.colors[1],'">').concat(this.yLabels[1],"</span>"),this.layout.series={},this.layout.series[this.labels[1]]={axis:"y"},this.layout.series[this.labels[2]]={axis:"y2"},this.layout.axes={x:{axisLineColor:"#000"},y:{axisLineColor:this.colors[0]},y2:{axisLineColor:this.colors[1]}}):this.layout.legend="always"}},{key:"render",value:function(){new Dygraph(this.domNode,this.datas,this.layout)}},{key:"isEngineAvailable",value:function(){return!("undefined"==typeof Dygraph)}}]),e}(kt),Ct=function(t){function e(t,n){var r;return a()(this,e),(r=g()(this,b()(e).call(this,t,"apexcharts",n))).CDN="http://onc.danycabrera.com/engines/apexcharts.min.js",r.vendorURL="https://apexcharts.com",r.options={chart:r.getOption("chart",r.config.isTimeSeries?"line":"scatter"),reversed:r.getOption("reversed",!1),animationDelay:r.getOption("animationDelay",0),strokeCurve:r.getOption("strokeCurve","smooth"),strokeWidth:r.getOption("strokeWidth",2)},r.mbr={xMin:999999999,xMax:0,yMin:999999999,yMax:0},r.independentAxisTitle="",r.layout={},r}return k()(e,t),s()(e,[{key:"prepareDataset",value:function(t){this.config.isTimeSeries?this.prepareTimeSeries(t):this.prepareXY(t)}},{key:"prepareTimeSeries",value:function(t){var e,n=t.length;this.datas=new Array(n);for(var r=0;r<n;r++){e=t[r].data.values.length,this.datas[r]={name:"".concat(t[r].sensorName," [").concat(t[r].unitOfMeasure,"]"),data:new Array(e)};for(var o=0;o<e;o++)this.datas[r].data[o]=[Date.parse(t[r].data.sampleTimes[o]),t[r].data.values[o]]}}},{key:"prepareXY",value:function(t){for(var e=this.config,n=t.length,r=[],o="x"==e.independent?e.x[0]:e.y[0],a=0;a<n;a++)if(t[a].id==o){r=t[a].data.values,this.independentAxisTitle="".concat(t[a].sensorName," [").concat(t[a].unitOfMeasure,"]");break}var i,s=0;this.datas=new Array(n-1);for(var u=0;u<n;u++)if(t[u].id!=o){i=t[u].data.values.length,this.datas[s]={name:"".concat(t[u].sensorName," [").concat(t[u].unitOfMeasure,"]"),data:new Array(i)};for(var c=void 0,l=void 0,d=0;d<i;d++)"x"==e.independent?(c=r[d],l=t[u].data.values[d]):(c=t[u].data.values[d],l=r[d]),c&&l?(this.datas[s].data[d]=[c,l],this.updateMBR(c,l)):(i--,this.datas[s].data.length--);s++}}},{key:"updateMBR",value:function(t,e){this.mbr.xMin>t?this.mbr.xMin=t:this.mbr.xMax<t&&(this.mbr.xMax=t),this.mbr.yMin>e?this.mbr.yMin=e:this.mbr.yMax<e&&(this.mbr.yMax=e)}},{key:"prepareLayout",value:function(){var t=this.config,e={chart:{type:this.options.chart,zoom:{enabled:!0,type:"x"},animations:{enabled:!1,easing:"easeinout",speed:800,animateGradually:{enabled:!1,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},dataLabels:{enabled:!1},stroke:{curve:this.options.strokeCurve,width:this.options.strokeWidth},colors:this.colors,xaxis:{type:t.isTimeSeries?"datetime":"numeric",tickPlacement:"on",labels:{style:{fontSize:"11px"}}},yaxis:{type:"numeric",tickPlacement:"on",labels:{style:{fontSize:"11px"},title:{text:"hello"}},axisBorder:{show:!0},axisTicks:{show:!0}},legend:{show:!0,position:"top"},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},series:this.datas};t.isTimeSeries?(e.tooltip={x:{format:"dd-MMM-yyyy HH:mm:dd.ffff"}},e.xaxis.title={text:"Time"},1==this.datas.length&&(e.yaxis.title={text:this.datas[0].name},e.yaxis.seriesName=this.datas[0].name)):(e.chart.type="scatter",e.xaxis.min=this.mbr.xMin,e.xaxis.max=this.mbr.xMax,e.yaxis.min=this.mbr.yMin,e.yaxis.max=this.mbr.yMax,e.markers={size:3},e.xaxis.labels.formatter=this.truncateDecimals,"x"==t.independent?(e.xaxis.title={text:this.independentAxisTitle},1==t.y.length&&(e.yaxis.title={text:this.datas[0].name})):(e.yaxis.title={text:this.independentAxisTitle},e.yaxis=[e.yaxis],1==t.x.length&&(e.xaxis.title={text:this.datas[0].name}))),this.options.reversed&&(e.yaxis.reversed=!0,e.xaxis.position="top",e.xaxis.title.offsetY=-50),this.options.animationDelay>0&&(e.chart.animations.enabled=!0,e.chart.animations.animateGradually={enabled:!0,delay:this.options.animationDelay}),this.layout=e,console.log(e)}},{key:"truncateDecimals",value:function(t,e,n){if(t%1!=0&&t.toString().split(".")[1].length>3)return t.toFixed(3);return t}},{key:"render",value:function(){new ApexCharts(this.domNode,this.layout).render()}},{key:"isEngineAvailable",value:function(){return!("undefined"==typeof ApexCharts)}}]),e}(kt),Tt=(vt=function(t){function e(t,n,r){var o;a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).engine=null,o.computedData=[],o.isTimeSeries=!0,o.plotConfig={x:[],y:[],colors:[],independent:"x",isTimeSeries:!0,horizontal:!0,engine:o.options.engine},""==o.source&&(o.source="scalardata");try{o.processFilters()}catch(t){throw t}switch(o.source){case"plottingUtility":o.ds=new pt(o._onc,o.filters,o.showLoader);break;case"scalardata":o.ds=new ft(o._onc,o.filters,o.showLoader);break;default:throw new Error('Unrecognized data source for this plot widget: <b>"'.concat(o.source,'"</b>.'))}switch(o.options.engine.name){case"plotly":o.engine=new Dt(o.domNode,o.plotConfig,o.options);break;case"dygraphs":o.engine=new St(o.domNode,o.plotConfig,o.options);break;case"apexcharts":o.engine=new Ct(o.domNode,o.plotConfig,o.options)}if(!o.engine.isEngineAvailable())throw o.engine.errorUnavailable();return o.ds.addPerformanceMsg("<b>Render engine:</b> ".concat(o.engine.name)),o.domBaseNode.classList.add("eng_"+o.engine.name),o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=Q()(K.a.mark(function t(){var e,n=this,r=arguments;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(r.length>0&&void 0!==r[0])||r[0],this.loaderIsVisible=e,t.abrupt("return",new Promise(function(t,e){n.ds.download().then(function(e){n.createComputedDatasets(),t(e)},function(t){return e(t)})}));case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"renderContents",value:function(){if(this.ds.hasData()){var t=!0,e=[];if(!this.plotConfig.isTimeSeries){for(var n in this.ds.data)e.push({id:this.ds.data[n].id,count:this.ds.data[n].data.values.length});for(var r=0;r<e.length-1;r++)e[r].count!=e[r+1].count&&(t=!1)}if(t)this.engine.prepareDataset(this.ds.data),this.engine.prepareLayout(),this.statusBox.remove(),this.engine.render();else{for(var o="All sensors in xy plots must have the same number of samples.<ul>",a=0,i=e;a<i.length;a++){var s=i[a];o+="<li>Sensor ".concat(s.id," has ").concat(s.count," samples</li>")}this.showStatus("error",o+"</ul>")}}else this.showStatus("info","No sensor data found for the filters specified.")}},{key:"processFilters",value:function(){var t=this.filters;if(t.x||t.y){if(!t.x||!t.y)throw new Error("Both <b>data-x</b> and <b>data-y</b> are required for plots that are not time series.");switch(this.plotConfig.isTimeSeries=!1,this.plotConfig.x=lt(t.x),this.plotConfig.y=lt(t.y),1==this.plotConfig.y.length&&this.plotConfig.x.length>1&&(this.plotConfig.independent="y",this.plotConfig.horizontal=!1),delete this.filters.x,delete this.filters.y,this.source){case"plottingUtility":this.filters.sensorId=this.stringifySensorIds();break;case"scalardata":this.filters.sensorCategoryCodes=this.stringifySensorIds();break;case"dataProductDelivery":throw new Error("dataProductDelivery doesn't support multiple propertyCode yet.")}}else t.sensorId?this.plotConfig.y=lt(t.sensorId):t.propertyCode&&(this.plotConfig.y=lt(t.propertyCode));if(null==this.plotConfig.engine.name||""==this.plotConfig.engine.name){var e="plotly";t.x?e="apexcharts":t.sensorId&&t.sensorId.indexOf(",")<0&&(e="dygraphs"),this.plotConfig.engine.name=e}if(t.propertyCode&&t.propertyCode.indexOf(",")>-1&&(t.sensorCategoryCodes=t.propertyCode,delete t.propertyCode,this.addWarning("Multiple property codes detected in 'propertyCode'. Renamed attribute to 'sensorCategoryCodes' as required by the API.")),"dataProductDelivery"==this.source&&"average"==t.dpo_resample){var n=S.a.utc(t.dateFrom),r=S.a.utc(t.dateTo);if(r.diff(n,"second")<=t.dpo_average)throw new Error("The date range requested (".concat(r.diff(n,"second")," seconds) is too short for the resample period (").concat(t.dpo_average,") specified in <b>dpo_average</b>."))}}},{key:"createComputedDatasets",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this.computedData[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.compute(this.sensorData[0].data.sampleTimes,this.sensorData[0].data.values)}}catch(t){e=!0,n=t}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}}},{key:"parseChildren",value:function(){var t=this;this.baseNode.querySelectorAll(".computed").forEach(function(e,n){t.computedData.push(new ht(n,e))})}},{key:"stringifySensorIds",value:function(){return this.plotConfig.x.concat(this.plotConfig.y).join(",")}}]),e}(Y),c()(vt.prototype,"download",[f],Object.getOwnPropertyDescriptor(vt.prototype,"download"),vt.prototype),vt),Lt=(mt=function(){function t(e,n){a()(this,t),this.ds=e,this.bufferTime=p(n,"bufferTime",2e3),this.data=[],this.next=[],this.duration=0,this.pos=0,this.nextStartPos=0,this.timePerSample=0,this.retryDelay=0,this.doStall=!1,this.isWaitingNextData=!1}return s()(t,[{key:"nextSample",value:function(){var t=this.data.length;if(this.pos<this.data[0].length){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.data[n][this.pos];return this.pos++,e}if(!(this.next.length>0))return this.isWaitingNextData?null:(console.warn("Forcing a bufferTime increase to avoid drowning."),this.bufferTime+=1e3,this.scheduleNextPoll(this.bufferTime),null);this.data=this.next.slice(),this.next=[],this.pos=this.nextStartPos,this.nextStartPos=0;var r=this.data[0].length;this.duration=this.data[0][r-1].x-this.data[0][this.pos].x,this.timePerSample=this.duration/r,this.duration<2*this.bufferTime&&(this.doStall=!0),this.scheduleNextPoll(this.duration-this.bufferTime)}},{key:"start",value:function(){var t=this;return new Promise(function(e,n){t.ds.download().then(function(r){0!=r[0].data.values.length?(t.data=new Array(r.length),t.next=new Array(r.length),t.storeData(r,"current"),t.scheduleNextPoll(t.duration-t.bufferTime),e(r)):1==t.ds.sensorIds.length?n(new Error("No recent data found for the sensor ".concat(t.ds.sensorIds[0],"."))):n(new Error("No recent data found for the sensors: ".concat(t.ds.sensorIds.join(","),".")))},function(t){return n(t)})})}},{key:"requestNextData",value:function(){var t=this;this.ds.refreshDateRangeFilters(),this.ds.download(!1).then(function(e){t.storeData(e,"next");for(var n=0,r=t.data[0],o=r[r.length-1].x;t.next[0][n].x<=o;)n++;t.nextStartPos=n,t.isWaitingNextData=!1},function(e){t.scheduleNextPoll(null)})}},{key:"storeData",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",n=0;n<t.length;n++){var r=t[n].data,o=r.sampleTimes.length;if("current"==e){var a=r.sampleTimes[0],i=r.sampleTimes[o-1];this.duration=Date.parse(i)-Date.parse(a),this.timePerSample=this.duration/o,this.data[n]=new Array(o);for(var s=0;s<o;s++)this.data[n][s]={x:Date.parse(r.sampleTimes[s]),y:r.values[s]}}else{this.next[n]=new Array(o);for(var u=0;u<o;u++)this.next[n][u]={x:Date.parse(r.sampleTimes[u]),y:r.values[u]}}}}},{key:"getMaxValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=-9999999;if(this.data[t].length>0)for(var n=0;n<this.data[t].length;n++)this.data[t][n].y>e&&(e=this.data[t][n].y);if(this.next[t].length>0)for(var r=0;r<this.next[t].length;r++)this.next[t][r].y>e&&(e=this.next[t][r].y);return e}},{key:"getMinValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=99999999;if(this.data[t].length>0)for(var n=0;n<this.data[t].length;n++)this.data[t][n].y<e&&(e=this.data[t][n].y);if(this.next[t].length>0)for(var r=0;r<this.next[t].length;r++)this.next[t][r].y<e&&(e=this.next[t][r].y);return e}},{key:"getFirstTS",value:function(){return this.data.length>0&&this.data[0].length>0?this.data[0][0].x:null}},{key:"estimateValueWidth",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=5;if(this.data[e].length>0)for(var r=0;r<this.data[e].length;r++)(t="".concat(this.data[e][r].y)).length>n&&(n=t.length);return n}},{key:"scheduleNextPoll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==t?(t=this.retryDelay,this.retryDelay+=1e3):t<0&&(t=0),this.doStall&&(console.warn("Stalling delay ".concat(t," with extra ").concat(this.bufferTime," ms")),t+=this.bufferTime,this.doStall=!1),setTimeout(this.requestNextData,t),this.isWaitingNextData=!0}},{key:"getMetadata",value:function(){for(var t=this.ds.data.length,e=new Array(t),n=0;n<t;n++)e[n]={id:this.ds.data[n].id,sensorName:this.ds.data[n].sensorName,unitOfMeasure:this.ds.data[n].unitOfMeasure};return e}}]),t}(),c()(mt.prototype,"nextSample",[f],Object.getOwnPropertyDescriptor(mt.prototype,"nextSample"),mt.prototype),c()(mt.prototype,"start",[f],Object.getOwnPropertyDescriptor(mt.prototype,"start"),mt.prototype),c()(mt.prototype,"requestNextData",[f],Object.getOwnPropertyDescriptor(mt.prototype,"requestNextData"),mt.prototype),mt),Ot=function(){function t(e,n,r,o){a()(this,t),this.domNode=n,this.name=e,this.options=r,this.rts=o,this.CDN="",this.vendorURL="",this.colors=[],this.colorDefaults=yt(12);var i=p(r,"min",null),s=p(r,"max",null);this.minValue=i?lt(i,";"):null,this.maxValue=s?lt(s,";"):null,this.parseColors()}return s()(t,[{key:"parseColors",value:function(){this.colors=this.colorDefaults;var t=this.getOption("colors",null);if(t){var e=t.split(";");if(e)for(var n=0;n<e.length;n++)this.colors[n]=e[n];else this.colors[0]=t}}},{key:"getOption",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return p(this.options,t,e)}},{key:"errorUnavailable",value:function(){return new Error('<p>The real time engine <b>"'.concat(this.name,'"</b> is unavailable.</p>\n\t\t<p>You can add this library as a <em>&lt;script&gt;</em> with the <em>src</em>: <a href="').concat(this.CDN,'" target="_BLANK">').concat(this.CDN,'</a></p>\n\t\t<p>You can also obtain the original library at <a href="').concat(this.vendorURL,'" target="_BLANK">').concat(this.vendorURL,"</a>.</p>"))}}]),t}(),Pt=(gt=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,"smoothie",t,n,r))).CDN="http://onc.danycabrera.com/engines/smoothie.min.js",o.vendorURL="http://smoothiecharts.org",o.line=null,o.smoothie=null,o.layout={},o.options={decimals:o.getOption("decimals",3),delay:o.getOption("delay",1e3),bufferTime:o.getOption("bufferTime",2e3),speed:o.getOption("speed",50)},o}return k()(e,t),s()(e,[{key:"prepareLayout",value:function(){this.layout={millisPerPixel:this.options.speed,interpolation:"linear",grid:{fillStyle:"#ffffff",strokeStyle:"#d0d0d0",sharpLines:!0,borderVisible:!1,verticalSections:4,millisPerLine:5e3},labels:{fillStyle:"#333",precision:this.options.decimals,showIntermediateLabels:!0,intermediateLabelSameAxis:!0},tooltip:!0,responsive:!0,nonRealtimeData:!1}}},{key:"render",value:function(){var t=this;this.line=new TimeSeries;var e=this.rts.getMaxValue(),n=this.rts.getMinValue();this.line.maxValue=1.1*n,this.line.minValue=1.1*e;var r=document.createElement("canvas");r.height="100",this.domNode.appendChild(r),this.smoothie=new SmoothieChart(this.layout),this.smoothie.streamTo(r,this.options.delay),this.smoothie.addTimeSeries(this.line,{lineWidth:2,strokeStyle:this.colors[0]}),setInterval(function(){var e=t.rts.nextSample();e&&t.line.append(Date.now(),e[1])},this.rts.timePerSample)}},{key:"isEngineAvailable",value:function(){return!("undefined"==typeof SmoothieChart)}}]),e}(Ot),c()(gt.prototype,"render",[f],Object.getOwnPropertyDescriptor(gt.prototype,"render"),gt.prototype),gt),Rt=(wt=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,"chartjs",t,n,r))).CDN="http://onc.danycabrera.com/engines/chartjs.min.js",o.vendorURL="https://www.chartjs.org",o.chart=null,o.layout={},o.dataInfo=[],o.domValueBlocks=[],o.options={decimals:o.getOption("decimals",3),delay:o.getOption("delay",1e3),bufferTime:o.getOption("bufferTime",2e3),speed:o.getOption("speed",2e4)},o}return k()(e,t),s()(e,[{key:"prepareLayout",value:function(){this.dataInfo=this.rts.getMetadata();for(var t=this.dataInfo,e=Date.now()-this.rts.getFirstTS(),n=[],r=[],o=0;o<t.length;o++){var a="".concat(t[o].sensorName," [").concat(t[o].unitOfMeasure,"]");n.push({label:a,data:[],borderColor:this.colors[o],backgroundColor:this.colors[o],fill:!1,yAxisID:"y-axis-".concat(o)});var i={display:!0,type:"linear",scaleLabel:{display:!0,labelString:a,fontColor:this.colors[o]},ticks:{fontColor:this.colors[o]},position:o%2==0?"left":"right",id:"y-axis-".concat(o),gridLines:{drawOnChartArea:!1}};this.minValue&&(i.ticks.min=+this.minValue[o]),this.maxValue&&(i.ticks.max=+this.maxValue[o]),r.push(i)}r[0].gridlines={},this.layout={type:"line",data:{datasets:n},options:{responsive:!0,scales:{xAxes:[{type:"realtime",realtime:{duration:this.options.speed,refresh:this.rts.timePerSample,onRefresh:this.addSample,delay:e+this.options.delay}}],yAxes:r},tooltips:{mode:"nearest",intersect:!1},hover:{mode:"nearest",intersect:!1},legend:{display:!1}}}}},{key:"addSample",value:function(){var t=this.rts.nextSample();if(t)for(var e=0;e<t.length;e++)this.chart.data.datasets[e].data.push(t[e]),this.domValueBlocks[e].innerHTML=t[e].y}},{key:"render",value:function(){var t=document.createElement("div");t.classList.add("legend");for(var e=this.dataInfo,n=[],r=0;r<e.length;r++)n.push('<span class="value idx_'.concat(r,'" style="background: ').concat(this.colors[r],'"></span> ').concat(e[r].sensorName," [").concat(e[r].unitOfMeasure,"]"));t.innerHTML="<ul>"+q(n,"li")+"</ul>",this.domNode.appendChild(t);for(var o=0;o<e.length;o++)this.domValueBlocks.push(t.querySelector("span.idx_"+o)),this.domValueBlocks[o].style.width=6*this.rts.estimateValueWidth(o)+16+"px";var a=document.createElement("canvas"),i=a.getContext("2d");this.domNode.appendChild(a),this.chart=new Chart(i,this.layout)}},{key:"isEngineAvailable",value:function(){return!("undefined"==typeof Chart)}}]),e}(Ot),c()(wt.prototype,"addSample",[f],Object.getOwnPropertyDescriptor(wt.prototype,"addSample"),wt.prototype),c()(wt.prototype,"render",[f],Object.getOwnPropertyDescriptor(wt.prototype,"render"),wt.prototype),wt),Et=(bt=function(t){function e(t,n,r){var o;switch(a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).engine=null,""==o.source&&(o.source="scalardata"),o.source){case"plottingUtility":o.ds=new pt(o._onc,o.filters,o.showLoader);break;case"scalardata":o.ds=new ft(o._onc,o.filters,o.showLoader);break;default:throw new Error('Unrecognized data source for this plot widget: <b>"'.concat(o.source,'"</b>.'))}o.ds.userDates=o.parser.userDates;var i=o.options.engine;switch(o.rts=new Lt(o.ds,i),null!=i.name&&""!=i.name||(i.name="smoothie"),o.options.engine.name){case"smoothie":o.engine=new Pt(o.domNode,i,o.rts);break;case"chartjs":o.engine=new Rt(o.domNode,i,o.rts)}if(!o.engine.isEngineAvailable())throw o.engine.errorUnavailable();return o.ds.addPerformanceMsg("<b>Render engine:</b> ".concat(o.engine.name)),o.domBaseNode.classList.add("eng_"+o.engine.name),o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=Q()(K.a.mark(function t(){var e=this;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){e.rts.start().then(function(n){e.engine.prepareLayout(),e.loaderIsVisible=!1,t(n)},function(t){return n(t)})}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"renderContents",value:function(){this.ds.hasData()?(this.statusBox.remove(),this.engine.render()):this.showStatus("info","No sensor data found for the filters specified.")}}]),e}(Y),c()(bt.prototype,"download",[f],Object.getOwnPropertyDescriptor(bt.prototype,"download"),bt.prototype),bt),Mt=(xt=function(t){function e(t,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return a()(this,e),(o=g()(this,b()(e).call(this,"dataProductDelivery")))._onc=t,o.filters=n,o.storeProduct=i,o.dpRequestId=0,o.dpRunId=0,o.pollCount=0,o.fileCount=0,o.payloadSize=0,o.contentTypes=[],o.downloadURLs=[],o.cbkShowLoader=r,o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=this;return this.data=[],this.logDownloadStart(),this.cbkShowLoader("loading","Requesting data product"),new Promise(function(){var e=Q()(K.a.mark(function e(n,r){var o,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.cancelled){e.next=3;break}return r("cancelled"),e.abrupt("return");case 3:return e.prev=3,e.next=6,t._onc.productRequest(t.filters);case 6:if(o=e.sent,!t.cancelled){e.next=9;break}throw"cancelled";case 9:t.cbkShowLoader("waiting","Waiting for data product"),t.dpRequestId=o.data.dpRequestId,t.saveRequestURL(o),a=0;case 13:if(200==a){e.next=21;break}return e.next=16,t.run();case 16:if(a=e.sent,!t.cancelled){e.next=19;break}throw"cancelled";case 19:e.next=13;break;case 21:if(t.addDownloadURLs(),!t.storeProduct){e.next=29;break}if(!(t.fileCount>0)){e.next=28;break}return e.next=26,t.downloadFileBlobs();case 26:e.next=29;break;case 28:throw"empty";case 29:t.logDownloadEnd(),n(),e.next=38;break;case 33:return e.prev=33,e.t0=e.catch(3),e.t0.response&&t.saveRequestURL(e.t0.response),r(e.t0),e.abrupt("return");case 38:case"end":return e.stop()}},e,null,[[3,33]])}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"run",value:function(){var t=Q()(K.a.mark(function t(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._onc.productRun({dpRequestId:this.dpRequestId});case 2:return e=t.sent,0==this.pollCount&&this.saveRequestURL(e),this.pollCount++,200==e.status?(this.dpRunId=e.data[0].dpRunId,this.fileCount=e.data[0].fileCount,this.cbkShowLoader("downloading","Downloading ".concat(this.fileCount," files"))):this.cbkShowLoader("waiting","(".concat(e.statusText,") ").concat(e.data[0].status)),t.abrupt("return",e.status);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"requestStatus",value:function(){var t=Q()(K.a.mark(function t(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._onc.productStatus({dpRequestId:this.dpRequestId});case 2:return e=t.sent,this.pollCount++,this.onRunEnd&&this.onRunEnd(e),t.abrupt("return",202);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"downloadFileBlobs",value:function(){var t=Q()(K.a.mark(function t(){var e,n;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=1;case 1:if(!(e<=this.fileCount)){t.next=9;break}return t.next=4,this._onc.productDownload({dpRunId:this.dpRunId,index:e});case 4:200==(n=t.sent).status&&(this.saveRequestURL(n),this.data.push(n.data),this.payloadSize+=n.data.length,this.contentTypes.push(n.headers["content-type"]));case 6:e++,t.next=1;break;case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"addDownloadURLs",value:function(){for(var t=1;t<=this.fileCount;t++)this.downloadURLs.push(this._onc.getProductDownloadURL(this.dpRunId,t))}},{key:"saveRequestURL",value:function(t){var e=t.request.responseURL;this._onc.useProxy&&(e=t.config.headers["X-Proxy-Url"]+e.substr(t.config.url.length)),this.requestURLs.push(e)}}]),e}(et),c()(xt.prototype,"download",[f],Object.getOwnPropertyDescriptor(xt.prototype,"download"),xt.prototype),xt),Nt=function(t){function e(t,n){var r;return a()(this,e),(r=g()(this,b()(e).call(this,"quickPlot"))).filters=t,r.baseUrl="https://data.oceannetworks.ca/Plot",r.fileCount=0,r.cbkShowLoader=n,r}return k()(e,t),s()(e,[{key:"download",value:function(){var t=this;return this.data=[],new Promise(function(){var e=Q()(K.a.mark(function e(n,r){var o,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.cancelled){e.next=3;break}return r("cancelled"),e.abrupt("return");case 3:o="on"==t.filters.plotTitle?"on":"off",a={sensorId:t.filters.sensorId,datefrom:S.a.utc(t.filters.dateFrom).format("DD-MMM-YYYY HH:mm:ss"),dateto:S.a.utc(t.filters.dateTo).format("DD-MMM-YYYY HH:mm:ss"),plotwidth:320,plotheight:240,plottitle:o},(i=Object.assign({},a)).plotwidth=800,i.plotheight=600,t.data.push({thumb:t.baseUrl+"?"+t.stringifyFilters(a),url:t.baseUrl+"?"+t.stringifyFilters(i)}),t.fileCount++,n();case 11:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())}},{key:"stringifyFilters",value:function(t){for(var e="",n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];e.length>0&&(e+="&"),e+="".concat(o,"=").concat(encodeURI(t[o]))}return e}}]),e}(et);n(63);var _t,At=function(t){function e(t,n,r){var o;if(a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).cancelled)return g()(o);switch(o.source){case"quickPlot":o.ds=new Nt(o.filters,o.showLoader);break;case"dataProductDelivery":o.ds=new Mt(o._onc,o.filters,o.showLoader)}return o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=Q()(K.a.mark(function t(){var e=this;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){e.ds.download().then(function(e){t(e)},function(t){return n(t)})}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"renderContents",value:function(){var t=this.ds.fileCount;if(0!=t){this.showLoader("downloading","Downloading..."),this.ds.addPerformanceMsg("Payload size does not include the images downloaded by this widget.");for(var e=0;e<t;e++)this.renderImage(e)}}},{key:"renderImage",value:function(t){var e="",n="";switch(this.source){case"quickPlot":e=this.ds.data[t].url,n=this.ds.data[t].thumb;break;case"dataProductDelivery":e=this.ds.downloadURLs[t],n=this.ds.downloadURLs[t]}switch(this.ds.addRequestURL(e),this.options.theme){case"default":this.theme_default(e);break;case"plain":this.theme_plain(e);break;case"gallery":this.theme_gallery(e,n)}}},{key:"theme_default",value:function(t){var e=this,n=new Image;n.onload=function(){return e.statusBox.remove()},n.src=t,n.classList.add("oncImage"),this.domNode.appendChild(n)}},{key:"theme_plain",value:function(t){var e=this,n=new Image;n.onload=function(){return e.statusBox.remove()},n.onerror=function(){e.statusBox.remove(),e.showStatus("error","Failed to download image")},n.src=t,this.domNode.appendChild(n)}},{key:"theme_gallery",value:function(t,e){var n=this,r=document.createElement("div");r.classList.add("thumb");var o=document.createElement("div");o.className="oncBackdrop",o.innerHTML='<span class="btClose" onclick="this.parentNode.click()">&otimes;</span><img src="'.concat(t,'">'),o.onclick=function(t){t.target.className.includes("oncBackdrop")&&this.classList.remove("active")},r.appendChild(o);var a=new Image;a.onload=function(){return n.statusBox.remove()},a.onerror=function(t){n.statusBox.remove(),n.showStatus("error","Failed to download image")},a.src=e,a.className="oncImageThumb",a.onclick=function(){var t=this.parentNode.querySelector("div.oncBackdrop");t.classList.add("active");var e=t.querySelector("img");""==e.className?(wheelzoom(e),e.className="zoomable",e.onmouseup="event.stopPropagation()"):e.dispatchEvent(new Event("wheelzoom.reset"))},r.appendChild(a),this.domNode.appendChild(r)}}]),e}(Y),qt=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).ds=new Mt(o._onc,o.filters,o.showLoader),o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=Q()(K.a.mark(function t(){var e=this;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){e.ds.download().then(function(e){t(e)},function(t){return n(t)})}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"renderContents",value:function(){console.log(this.ds);var t=this.ds.fileCount;if(0!=t){this.statusBox.remove();for(var e=[],n="",r="",o=0;o<t;o++)n=this.ds.downloadURLs[o],r=this.filters.extension,e.push('<a href="'.concat(n,'">Data product ').concat(o+1," (").concat(r,")</a>"));this.domNode.innerHTML='<ul class="download">'.concat(q(e,"li"),"</ul>")}}}]),e}(Y),jt=function(t){function e(t,n,r){var o;return a()(this,e),(o=g()(this,b()(e).call(this,"rawdata")))._onc=t,o.filters=n,o.cbkShowLoader=r,o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=this;return new Promise(function(e,n){t.filters.dateFrom||t.filters.dateTo||(t.filters.dateFrom="-P0Y0M0DT0H1M0S",t.filters.rowLimit="3",t.filters.getLatest=!0),t._onc.getRawData(t.filters).then(function(n){t.data=n.data.data,e(t.data)},function(t){n(t)})})}}]),e}(et),Ut=(_t=function(t){function e(t,n,r){var o;a()(this,e),(o=g()(this,b()(e).call(this,t,n,r))).delay=p(o.options,"delay",2e3),o.maxLogRows=p(o.options,"maxLogRows","100"),o.formatter=null;var i=p(o.options,"formatter","");return""!=i&&void 0!==window[i]&&(o.formatter=window[i]),o.ds=new jt(o._onc,o.filters,o.showLoader),o.logCount=0,o}return k()(e,t),s()(e,[{key:"download",value:function(){var t=this;return new Promise(function(e,n){t.ds.download().then(function(r){t.ds.data&&t.ds.data.length>0?(setTimeout(t.requestData,t.delay),e(r)):n(new Error("No recent data found for the filters provided."))},function(t){return n(t)})})}},{key:"requestData",value:function(){var t=this;this.ds.download().then(function(e){t.displayData(t.ds.data),setTimeout(t.requestData,t.delay)},function(t){console.log(t)})}},{key:"displayData",value:function(t){this.domNode.querySelector("tr.dataRow").innerHTML=this.renderElement(t[0]);var e=this.formatter?this.formatter(t[0].rawData):t[0].rawData,n=this.domNode.querySelector("tr.logRow ul"),r=document.createElement(r);r.innerHTML="<li>".concat(t[0].sampleTime," ").concat(e,"</li>"),n.prepend(r),this.logCount++,this.logCount>this.maxLogRows&&n.removeChild(n.lastElementChild)}},{key:"renderContents",value:function(){var t="";t+='<tr class="dataRow console">'+this.renderElement(this.ds.data[0])+"</tr>",t+='<tr class="logRow"><td colspan="4"><ul></ul></td></tr>',this.domNode.innerHTML=j(["Date","Time","Line Type","Data"],t)}},{key:"renderElement",value:function(t){var e=t.sampleTime.split("T"),n=e[0],r=e[1].substr(0,e[1].length-1),o=t.rawData;return this.formatter&&(o=this.formatter(o)),q([n,r,'"'+t.lineType+'"',o],"td",",,center,")}}]),e}(Y),c()(_t.prototype,"requestData",[f],Object.getOwnPropertyDescriptor(_t.prototype,"requestData"),_t.prototype),c()(_t.prototype,"displayData",[f],Object.getOwnPropertyDescriptor(_t.prototype,"displayData"),_t.prototype),_t),It=function(){function t(){a()(this,t),this._widgets=[];var e=document.getElementById("oncdw");this._token=e&&e.dataset&&e.dataset.token?e.dataset.token:"",this._onc=new v(this._token)}return s()(t,[{key:"detectWidgets",value:function(){var t=this;document.querySelectorAll(".oncWidget").forEach(function(e,n){var r,o=e.dataset.widget;try{if(""==t._token)throw new Error("This library requires a valid <b>data-token</b>.");switch(o){case"version":r=new G(n,e,"version");break;case"plot":r=new Tt(n,e,t._onc);break;case"rtplot":r=new Et(n,e,t._onc);break;case"image":r=new At(n,e,t._onc);break;case"download":r=new qt(n,e,t._onc);break;case"rawValue":r=new Ut(n,e,t._onc);break;case"locationsTree":r=new rt(n,e,t._onc);break;case"locations":r=new ot(n,e,t._onc);break;case"devices":r=new it(n,e,t._onc);break;case"deployments":r=new ut(n,e,t._onc);break;case"deviceCategories":r=new at(n,e,t._onc);break;case"properties":r=new st(n,e,t._onc);break;case"dataProducts":r=new ct(n,e,t._onc);break;default:throw new Error("This widget requires a valid <b>data-widget</b> attribute.")}}catch(t){console.log(t),r=new G(n,e,"error",t.message)}t._widgets.push(r)})}},{key:"processWidgets",value:function(){var t=this,e=!0,n=!1,r=void 0;try{for(var o,a=function(){var e=o.value;e.cancelled||e.download().then(function(t){e.render()},function(n){"empty"==n?e.showStatus("info","The server responded with an empty data set."):"canceled"==n?t.showStatus("info","Download process canceled."):n.response&&n.response.data?e.showStatus("api_error",t._onc.errorToString(n)):e.showStatus("error",n.message),console.log(n)})},i=this._widgets[Symbol.iterator]();!(e=(o=i.next()).done);e=!0)a()}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}}}]),t}();n(64);document.addEventListener("DOMContentLoaded",function(){var t=new It;t.detectWidgets(),t.processWidgets()})}]);

